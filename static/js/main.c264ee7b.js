/*! For license information please see main.c264ee7b.js.LICENSE.txt */
!function(){var t={506:function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},575:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},913:function(t){function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},842:function(t,e,r){var n=r(754),i=r(67),o=r(585);t.exports=function(t){var e=i();return function(){var r,i=n(t);if(e){var a=n(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return o(this,r)}},t.exports.__esModule=!0,t.exports.default=t.exports},754:function(t){function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},205:function(t,e,r){var n=r(489);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},67:function(t){t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},585:function(t,e,r){var n=r(8).default,i=r(506);t.exports=function(t,e){if(e&&("object"===n(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},489:function(t){function e(r,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r,n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},8:function(t){function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},757:function(t,e,r){t.exports=r(937)},470:function(t,e){"use strict";e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,o=u(t),a=o[0],s=o[1],h=new i(function(t,e,r){return 3*(e+r)/4-r}(0,a,s)),f=0,c=s>0?a-4:a;for(r=0;r<c;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],h[f++]=e>>16&255,h[f++]=e>>8&255,h[f++]=255&e;2===s&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,h[f++]=255&e);1===s&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,h[f++]=e>>8&255,h[f++]=255&e);return h},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(h(t,s,s+a>u?u:s+a));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],n=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function h(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},789:function(t,e){"use strict";function r(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1)&&!!t},e.log2=function(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=r,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(n),e.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},918:function(t,e,r){"use strict";var n=r(575).default,i=r(913).default,o=r(506).default,a=r(205).default,s=r(842).default,u=r(470),h=r(545),f="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=p,e.h2=50;var c=2147483647;function l(t){if(t>c)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,p.prototype),e}function p(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return v(t)}return d(t,e,r)}function d(t,e,r){if("string"===typeof t)return function(t,e){"string"===typeof e&&""!==e||(e="utf8");if(!p.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|w(t,e),n=l(r),i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(tt(t,Uint8Array)){var e=new Uint8Array(t);return m(e.buffer,e.byteOffset,e.byteLength)}return y(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(tt(t,ArrayBuffer)||t&&tt(t.buffer,ArrayBuffer))return m(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(tt(t,SharedArrayBuffer)||t&&tt(t.buffer,SharedArrayBuffer)))return m(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return p.from(n,e,r);var i=function(t){if(p.isBuffer(t)){var e=0|b(t.length),r=l(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!==typeof t.length||et(t.length)?l(0):y(t);if("Buffer"===t.type&&Array.isArray(t.data))return y(t.data)}(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return p.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function g(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function v(t){return g(t),l(t<0?0:0|b(t))}function y(t){for(var e=t.length<0?0:0|b(t.length),r=l(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function m(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,p.prototype),n}function b(t){if(t>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return 0|t}function w(t,e){if(p.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||tt(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(t).length;default:if(i)return n?-1:Q(t).length;e=(""+e).toLowerCase(),i=!0}}function _(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,r);case"utf8":case"utf-8":return S(this,e,r);case"ascii":return C(this,e,r);case"latin1":case"binary":return B(this,e,r);case"base64":return O(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function x(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function E(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),et(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=p.from(e,n)),p.isBuffer(e))return 0===e.length?-1:T(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):T(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function T(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function h(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var f=-1;for(o=r;o<s;o++)if(h(t,o)===h(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*a}else-1!==f&&(o-=o-f),f=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var c=!0,l=0;l<u;l++)if(h(t,o+l)!==h(e,l)){c=!1;break}if(c)return o}return-1}function A(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o,a=e.length;for(n>a/2&&(n=a/2),o=0;o<n;++o){var s=parseInt(e.substr(2*o,2),16);if(et(s))return o;t[r+o]=s}return o}function I(t,e,r,n){return J(Q(e,t.length-r),t,r,n)}function M(t,e,r,n){return J(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function R(t,e,r,n){return J($(e),t,r,n)}function L(t,e,r,n){return J(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function O(t,e,r){return 0===e&&r===t.length?u.fromByteArray(t):u.fromByteArray(t.slice(e,r))}function S(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var u=void 0,h=void 0,f=void 0,c=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:128===(192&(u=t[i+1]))&&(c=(31&o)<<6|63&u)>127&&(a=c);break;case 3:u=t[i+1],h=t[i+2],128===(192&u)&&128===(192&h)&&(c=(15&o)<<12|(63&u)<<6|63&h)>2047&&(c<55296||c>57343)&&(a=c);break;case 4:u=t[i+1],h=t[i+2],f=t[i+3],128===(192&u)&&128===(192&h)&&128===(192&f)&&(c=(15&o)<<18|(63&u)<<12|(63&h)<<6|63&f)>65535&&c<1114112&&(a=c)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return function(t){var e=t.length;if(e<=U)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=U));return r}(n)}p.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(r){return!1}}(),p.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(t,e,r){return d(t,e,r)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(t,e,r){return function(t,e,r){return g(t),t<=0?l(t):void 0!==e?"string"===typeof r?l(t).fill(e,r):l(t).fill(e):l(t)}(t,e,r)},p.allocUnsafe=function(t){return v(t)},p.allocUnsafeSlow=function(t){return v(t)},p.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==p.prototype},p.compare=function(t,e){if(tt(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),tt(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(t)||!p.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},p.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return p.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=p.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(tt(o,Uint8Array))i+o.length>n.length?(p.isBuffer(o)||(o=p.from(o)),o.copy(n,i)):Uint8Array.prototype.set.call(n,o,i);else{if(!p.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i)}i+=o.length}return n},p.byteLength=w,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)x(this,e,e+1);return this},p.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)x(this,e,e+3),x(this,e+1,e+2);return this},p.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)x(this,e,e+7),x(this,e+1,e+6),x(this,e+2,e+5),x(this,e+3,e+4);return this},p.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):_.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(t){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===p.compare(this,t)},p.prototype.inspect=function(){var t="",r=e.h2;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},f&&(p.prototype[f]=p.prototype.inspect),p.prototype.compare=function(t,e,r,n,i){if(tt(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(n,i),h=t.slice(e,r),f=0;f<s;++f)if(u[f]!==h[f]){o=u[f],a=h[f];break}return o<a?-1:a<o?1:0},p.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},p.prototype.indexOf=function(t,e,r){return E(this,t,e,r,!0)},p.prototype.lastIndexOf=function(t,e,r){return E(this,t,e,r,!1)},p.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,e,r);case"utf8":case"utf-8":return I(this,t,e,r);case"ascii":case"latin1":case"binary":return M(this,t,e,r);case"base64":return R(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var U=4096;function C(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function B(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function D(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=rt[t[o]];return i}function P(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function N(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,r,n,i,o){if(!p.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function k(t,e,r,n,i){q(e,n,i,t,r,7);var o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;var a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,r}function F(t,e,r,n,i){q(e,n,i,t,r,7);var o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;var a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=a,a>>=8,t[r+2]=a,a>>=8,t[r+1]=a,a>>=8,t[r]=a,r+8}function V(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function H(t,e,r,n,i){return e=+e,r>>>=0,i||V(t,0,r,4),h.write(t,e,r,n,23,4),r+4}function W(t,e,r,n,i){return e=+e,r>>>=0,i||V(t,0,r,8),h.write(t,e,r,n,52,8),r+8}p.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,p.prototype),n},p.prototype.readUintLE=p.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},p.prototype.readUintBE=p.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},p.prototype.readUint8=p.prototype.readUInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),this[t]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]|this[t+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]<<8|this[t+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},p.prototype.readBigUInt64LE=nt((function(t){z(t>>>=0,"offset");var e=this[t],r=this[t+7];void 0!==e&&void 0!==r||K(t,this.length-8);var n=e+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24),i=this[++t]+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+r*Math.pow(2,24);return BigInt(n)+(BigInt(i)<<BigInt(32))})),p.prototype.readBigUInt64BE=nt((function(t){z(t>>>=0,"offset");var e=this[t],r=this[t+7];void 0!==e&&void 0!==r||K(t,this.length-8);var n=e*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t],i=this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),p.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},p.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},p.prototype.readInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},p.prototype.readInt16LE=function(t,e){t>>>=0,e||N(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},p.prototype.readInt16BE=function(t,e){t>>>=0,e||N(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},p.prototype.readInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},p.prototype.readInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},p.prototype.readBigInt64LE=nt((function(t){z(t>>>=0,"offset");var e=this[t],r=this[t+7];void 0!==e&&void 0!==r||K(t,this.length-8);var n=this[t+4]+this[t+5]*Math.pow(2,8)+this[t+6]*Math.pow(2,16)+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24))})),p.prototype.readBigInt64BE=nt((function(t){z(t>>>=0,"offset");var e=this[t],r=this[t+7];void 0!==e&&void 0!==r||K(t,this.length-8);var n=(e<<24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+r)})),p.prototype.readFloatLE=function(t,e){return t>>>=0,e||N(t,4,this.length),h.read(this,t,!0,23,4)},p.prototype.readFloatBE=function(t,e){return t>>>=0,e||N(t,4,this.length),h.read(this,t,!1,23,4)},p.prototype.readDoubleLE=function(t,e){return t>>>=0,e||N(t,8,this.length),h.read(this,t,!0,52,8)},p.prototype.readDoubleBE=function(t,e){return t>>>=0,e||N(t,8,this.length),h.read(this,t,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||j(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||j(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},p.prototype.writeUint8=p.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,1,255,0),this[e]=255&t,e+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},p.prototype.writeBigUInt64LE=nt((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return k(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),p.prototype.writeBigUInt64BE=nt((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return F(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),p.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);j(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},p.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);j(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},p.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},p.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},p.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},p.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},p.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},p.prototype.writeBigInt64LE=nt((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return k(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),p.prototype.writeBigInt64BE=nt((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return F(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),p.prototype.writeFloatLE=function(t,e,r){return H(this,t,e,!0,r)},p.prototype.writeFloatBE=function(t,e,r){return H(this,t,e,!1,r)},p.prototype.writeDoubleLE=function(t,e,r){return W(this,t,e,!0,r)},p.prototype.writeDoubleBE=function(t,e,r){return W(this,t,e,!1,r)},p.prototype.copy=function(t,e,r,n){if(!p.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},p.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!p.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=p.isBuffer(t)?t:p.from(t,n),s=a.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var G={};function X(t,e,r){G[t]=function(r){a(h,r);var u=s(h);function h(){var r;return n(this,h),r=u.call(this),Object.defineProperty(o(r),"message",{value:e.apply(o(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(t,"]"),r.stack,delete r.name,r}return i(h,[{key:"code",get:function(){return t},set:function(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}}]),h}(r)}function Y(t){for(var e="",r=t.length,n="-"===t[0]?1:0;r>=n+4;r-=3)e="_".concat(t.slice(r-3,r)).concat(e);return"".concat(t.slice(0,r)).concat(e)}function q(t,e,r,n,i,o){if(t>r||t<e){var a,s="bigint"===typeof e?"n":"";throw a=o>3?0===e||e===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(o+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(o+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(s):">= ".concat(e).concat(s," and <= ").concat(r).concat(s),new G.ERR_OUT_OF_RANGE("value",a,t)}!function(t,e,r){z(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||K(e,t.length-(r+1))}(n,i,o)}function z(t,e){if("number"!==typeof t)throw new G.ERR_INVALID_ARG_TYPE(e,"number",t)}function K(t,e,r){if(Math.floor(t)!==t)throw z(t,r),new G.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new G.ERR_BUFFER_OUT_OF_BOUNDS;throw new G.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(e),t)}X("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),X("ERR_INVALID_ARG_TYPE",(function(t,e){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(typeof e)}),TypeError),X("ERR_OUT_OF_RANGE",(function(t,e,r){var n='The value of "'.concat(t,'" is out of range.'),i=r;return Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)?i=Y(String(r)):"bigint"===typeof r&&(i=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(i=Y(i)),i+="n"),n+=" It must be ".concat(e,". Received ").concat(i)}),RangeError);var Z=/[^+/0-9A-Za-z-_]/g;function Q(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function $(t){return u.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function J(t,e,r,n){var i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function tt(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function et(t){return t!==t}var rt=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}();function nt(t){return"undefined"===typeof BigInt?it:t}function it(){throw new Error("BigInt not supported")}},504:function(t,e,r){"use strict";var n=r(292);function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}t.exports=function(t){var e=new i;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var o=0;o<r.length;++o){var a=r[o];if("array"===a||"object"===typeof a&&a.blockIndices){if(e.argTypes[o]="array",e.arrayArgs.push(o),e.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),e.shimArgs.push("array"+o),o<e.pre.args.length&&e.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<e.post.args.length&&e.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)e.scalarArgs.push(o),e.shimArgs.push("scalar"+o);else if("index"===a){if(e.indexArgs.push(o),o<e.pre.args.length&&e.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<e.body.args.length&&e.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<e.post.args.length&&e.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(e.shapeArgs.push(o),o<e.pre.args.length&&e.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<e.body.args.length&&e.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<e.post.args.length&&e.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!==typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+r[o]);e.argTypes[o]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(o)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,n(e)}},361:function(t,e,r){"use strict";var n=r(5);function i(t,e,r){var n,i,o=t.length,a=e.arrayArgs.length,s=e.indexArgs.length>0,u=[],h=[],f=0,c=0;for(n=0;n<o;++n)h.push(["i",n,"=0"].join(""));for(i=0;i<a;++i)for(n=0;n<o;++n)c=f,f=t[n],0===n?h.push(["d",i,"s",n,"=t",i,"p",f].join("")):h.push(["d",i,"s",n,"=(t",i,"p",f,"-s",c,"*t",i,"p",c,")"].join(""));for(h.length>0&&u.push("var "+h.join(",")),n=o-1;n>=0;--n)f=t[n],u.push(["for(i",n,"=0;i",n,"<s",f,";++i",n,"){"].join(""));for(u.push(r),n=0;n<o;++n){for(c=f,f=t[n],i=0;i<a;++i)u.push(["p",i,"+=d",i,"s",n].join(""));s&&(n>0&&u.push(["index[",c,"]-=s",c].join("")),u.push(["++index[",f,"]"].join(""))),u.push("}")}return u.join("\n")}function o(t,e,r){for(var n=t.body,i=[],o=[],a=0;a<t.args.length;++a){var s=t.args[a];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),h="",f=e.arrayArgs.indexOf(a);switch(e.argTypes[a]){case"offset":var c=e.offsetArgIndex.indexOf(a);f=e.offsetArgs[c].array,h="+q"+c;case"array":h="p"+f+h;var l="l"+a,p="a"+f;if(0===e.arrayBlockIndices[f])1===s.count?"generic"===r[f]?s.lvalue?(i.push(["var ",l,"=",p,".get(",h,")"].join("")),n=n.replace(u,l),o.push([p,".set(",h,",",l,")"].join(""))):n=n.replace(u,[p,".get(",h,")"].join("")):n=n.replace(u,[p,"[",h,"]"].join("")):"generic"===r[f]?(i.push(["var ",l,"=",p,".get(",h,")"].join("")),n=n.replace(u,l),s.lvalue&&o.push([p,".set(",h,",",l,")"].join(""))):(i.push(["var ",l,"=",p,"[",h,"]"].join("")),n=n.replace(u,l),s.lvalue&&o.push([p,"[",h,"]=",l].join("")));else{for(var d=[s.name],g=[h],v=0;v<Math.abs(e.arrayBlockIndices[f]);v++)d.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(v+1)+"*t"+f+"b"+v);if(u=new RegExp(d.join(""),"g"),h=g.join("+"),"generic"===r[f])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[p,"[",h,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+e.scalarArgs.indexOf(a));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[i.join("\n"),n,o.join("\n")].join("\n").trim()}function a(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?e[n]="u"+i.charAt(1)+o:e[n]=i.charAt(0)+o,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}t.exports=function(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,s=new Array(t.arrayArgs.length),u=new Array(t.arrayArgs.length),h=0;h<t.arrayArgs.length;++h)u[h]=e[2*h],s[h]=e[2*h+1];var f=[],c=[],l=[],p=[],d=[];for(h=0;h<t.arrayArgs.length;++h){t.arrayBlockIndices[h]<0?(l.push(0),p.push(r),f.push(r),c.push(r+t.arrayBlockIndices[h])):(l.push(t.arrayBlockIndices[h]),p.push(t.arrayBlockIndices[h]+r),f.push(0),c.push(t.arrayBlockIndices[h]));for(var g=[],v=0;v<s[h].length;v++)l[h]<=s[h][v]&&s[h][v]<p[h]&&g.push(s[h][v]-l[h]);d.push(g)}var y=["SS"],m=["'use strict'"],b=[];for(v=0;v<r;++v)b.push(["s",v,"=SS[",v,"]"].join(""));for(h=0;h<t.arrayArgs.length;++h){y.push("a"+h),y.push("t"+h),y.push("p"+h);for(v=0;v<r;++v)b.push(["t",h,"p",v,"=t",h,"[",l[h]+v,"]"].join(""));for(v=0;v<Math.abs(t.arrayBlockIndices[h]);++v)b.push(["t",h,"b",v,"=t",h,"[",f[h]+v,"]"].join(""))}for(h=0;h<t.scalarArgs.length;++h)y.push("Y"+h);if(t.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),t.indexArgs.length>0){var w=new Array(r);for(h=0;h<r;++h)w[h]="0";b.push(["index=[",w.join(","),"]"].join(""))}for(h=0;h<t.offsetArgs.length;++h){var _=t.offsetArgs[h],x=[];for(v=0;v<_.offset.length;++v)0!==_.offset[v]&&(1===_.offset[v]?x.push(["t",_.array,"p",v].join("")):x.push([_.offset[v],"*t",_.array,"p",v].join("")));0===x.length?b.push("q"+h+"=0"):b.push(["q",h,"=",x.join("+")].join(""))}var E=n([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));for((b=b.concat(E)).length>0&&m.push("var "+b.join(",")),h=0;h<t.arrayArgs.length;++h)m.push("p"+h+"|=0");t.pre.body.length>3&&m.push(o(t.pre,t,u));var T=o(t.body,t,u),A=function(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}(d);A<r?m.push(function(t,e,r,n){for(var o=e.length,a=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,h=[],f=0;f<a;++f)h.push(["var offset",f,"=p",f].join(""));for(f=t;f<o;++f)h.push(["for(var j"+f+"=SS[",e[f],"]|0;j",f,">0;){"].join("")),h.push(["if(j",f,"<",s,"){"].join("")),h.push(["s",e[f],"=j",f].join("")),h.push(["j",f,"=0"].join("")),h.push(["}else{s",e[f],"=",s].join("")),h.push(["j",f,"-=",s,"}"].join("")),u&&h.push(["index[",e[f],"]=j",f].join(""));for(f=0;f<a;++f){for(var c=["offset"+f],l=t;l<o;++l)c.push(["j",l,"*t",f,"p",e[l]].join(""));h.push(["p",f,"=(",c.join("+"),")"].join(""))}for(h.push(i(e,r,n)),f=t;f<o;++f)h.push("}");return h.join("\n")}(A,d[0],t,T)):m.push(i(d[0],t,T)),t.post.body.length>3&&m.push(o(t.post,t,u)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+m.join("\n")+"\n----------");var I=[t.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",A,a(u)].join("");return new Function(["function ",I,"(",y.join(","),"){",m.join("\n"),"} return ",I].join(""))()}},292:function(t,e,r){"use strict";var n=r(361);t.exports=function(t){var e=["'use strict'","var CACHED={}"],r=[],i=t.funcName+"_cwise_thunk";e.push(["return function ",i,"(",t.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],u=[],h=[],f=0;f<t.arrayArgs.length;++f){var c=t.arrayArgs[f];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),o.push("t"+c),o.push("r"+c),a.push("t"+c),a.push("r"+c+".join()"),s.push("array"+c+".data"),s.push("array"+c+".stride"),s.push("array"+c+".offset|0"),f>0&&(u.push("array"+t.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[f]))),h.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[f])+"]"))}for(t.arrayArgs.length>1&&(e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+h.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}")),f=0;f<t.scalarArgs.length;++f)s.push("scalar"+t.scalarArgs[f]);return r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(n.bind(void 0,t))}},638:function(t){"use strict";function e(t,r,n){var i=0|t[n];if(i<=0)return[];var o,a=new Array(i);if(n===t.length-1)for(o=0;o<i;++o)a[o]=r;else for(o=0;o<i;++o)a[o]=e(t,r,n+1);return a}t.exports=function(t,r){switch("undefined"===typeof r&&(r=0),typeof t){case"number":if(t>0)return function(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}(0|t,r);break;case"object":if("number"===typeof t.length)return e(t,r,0)}return[]}},41:function(t){"use strict";var e,r="object"===typeof Reflect?Reflect:null,n=r&&"function"===typeof r.apply?r.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};e=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!==t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"===typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}g(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"===typeof t.on&&g(t,"error",e,r)}(t,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function h(t,e,r,n){var i,o,a,h;if(s(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),void 0===a)a=o[e]=r,++t._eventsCount;else if("function"===typeof a?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=u(t))>0&&a.length>i&&!a.warned){a.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=a.length,h=f,console&&console.warn&&console.warn(h)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function l(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):d(i,i.length)}function p(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function d(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function g(t,e,r,n){if("function"===typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!==typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[t];if(void 0===u)return!1;if("function"===typeof u)n(u,this,e);else{var h=u.length,f=d(u,h);for(r=0;r<h;++r)n(f[r],this,e)}return!0},o.prototype.addListener=function(t,e){return h(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return h(this,t,e,!0)},o.prototype.once=function(t,e){return s(e),this.on(t,c(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,c(this,t,e)),this},o.prototype.removeListener=function(t,e){var r,n,i,o,a;if(s(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},o.prototype.listeners=function(t){return l(this,t,!0)},o.prototype.rawListeners=function(t){return l(this,t,!1)},o.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},385:function(t,e,r){"use strict";var n=r(786),i=r(812),o=r(89);t.exports=function(t){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");a||h(t);if("number"===typeof arguments[1])return y(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return y(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var e=arguments[1],r=f(e)?e:e.raw;if(r)return m(t,r,0|e.width,0|e.height,arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if(e.shape&&e.data&&e.stride)return b(t,e)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,s=null,u=null;function h(t){a=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],s=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],u=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]}function f(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&t instanceof ImageData}var c=function(t,e){i.muls(t,e,255)};function l(t,e,r){var n=t.gl,i=n.getParameter(n.MAX_TEXTURE_SIZE);if(e<0||e>i||r<0||r>i)throw new Error("gl-texture2d: Invalid texture size");return t._shape=[e,r],t.bind(),n.texImage2D(n.TEXTURE_2D,0,t.format,e,r,0,t.format,t.type,null),t._mipLevels=[0],t}function p(t,e,r,n,i,o){this.gl=t,this.handle=e,this.format=i,this.type=o,this._shape=[r,n],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var a=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return a._wrapS},set:function(t){return a.wrapS=t}},{get:function(){return a._wrapT},set:function(t){return a.wrapT=t}}]),this._wrapVector=s;var u=[this._shape[0],this._shape[1]];Object.defineProperties(u,[{get:function(){return a._shape[0]},set:function(t){return a.width=t}},{get:function(){return a._shape[1]},set:function(t){return a.height=t}}]),this._shapeVector=u}var d=p.prototype;function g(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function v(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function y(t,e,r,n,i){var o=t.getParameter(t.MAX_TEXTURE_SIZE);if(e<0||e>o||r<0||r>o)throw new Error("gl-texture2d: Invalid texture shape");if(i===t.FLOAT&&!t.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var a=v(t);return t.texImage2D(t.TEXTURE_2D,0,n,e,r,0,n,i,null),new p(t,a,e,r,n,i)}function m(t,e,r,n,i,o){var a=v(t);return t.texImage2D(t.TEXTURE_2D,0,i,i,o,e),new p(t,a,r,n,i,o)}function b(t,e){var r=e.dtype,a=e.shape.slice(),s=t.getParameter(t.MAX_TEXTURE_SIZE);if(a[0]<0||a[0]>s||a[1]<0||a[1]>s)throw new Error("gl-texture2d: Invalid texture size");var u=g(a,e.stride.slice()),h=0;"float32"===r?h=t.FLOAT:"float64"===r?(h=t.FLOAT,u=!1,r="float32"):"uint8"===r?h=t.UNSIGNED_BYTE:(h=t.UNSIGNED_BYTE,u=!1,r="uint8");var f,l,d=0;if(2===a.length)d=t.LUMINANCE,a=[a[0],a[1],1],e=n(e.data,a,[e.stride[0],e.stride[1],1],e.offset);else{if(3!==a.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===a[2])d=t.ALPHA;else if(2===a[2])d=t.LUMINANCE_ALPHA;else if(3===a[2])d=t.RGB;else{if(4!==a[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");d=t.RGBA}}h!==t.FLOAT||t.getExtension("OES_texture_float")||(h=t.UNSIGNED_BYTE,u=!1);var y=e.size;if(u)f=0===e.offset&&e.data.length===y?e.data:e.data.subarray(e.offset,e.offset+y);else{var m=[a[2],a[2]*a[0],1];l=o.malloc(y,r);var b=n(l,a,m,0);"float32"!==r&&"float64"!==r||h!==t.UNSIGNED_BYTE?i.assign(b,e):c(b,e),f=l.subarray(0,y)}var w=v(t);return t.texImage2D(t.TEXTURE_2D,0,d,a[0],a[1],0,d,h,f),u||o.free(l),new p(t,w,a[0],a[1],d,h)}Object.defineProperties(d,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&a.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),s.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&a.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),s.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;if(this._anisoSamples=0|Math.max(t,1),e!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),u.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),u.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if(u.indexOf(t[e])<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw new Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return l(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return l(this,t|=0,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t|=0,l(this,this._shape[0],t),t}}}),d.bind=function(t){var e=this.gl;return void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},d.dispose=function(){this.gl.deleteTexture(this.handle)},d.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},d.setPixels=function(t,e,r,a){var s=this.gl;this.bind(),Array.isArray(e)?(a=r,r=0|e[1],e=0|e[0]):(e=e||0,r=r||0),a=a||0;var u=f(t)?t:t.raw;if(u){this._mipLevels.indexOf(a)<0?(s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,this.type,u),this._mipLevels.push(a)):s.texSubImage2D(s.TEXTURE_2D,a,e,r,this.format,this.type,u)}else{if(!(t.shape&&t.stride&&t.data))throw new Error("gl-texture2d: Unsupported data type");if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>a||r+t.shape[0]>this._shape[0]>>>a||e<0||r<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(t,e,r,a,s,u,h,f){var l=f.dtype,p=f.shape.slice();if(p.length<2||p.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var d=0,v=0,y=g(p,f.stride.slice());"float32"===l?d=t.FLOAT:"float64"===l?(d=t.FLOAT,y=!1,l="float32"):"uint8"===l?d=t.UNSIGNED_BYTE:(d=t.UNSIGNED_BYTE,y=!1,l="uint8");if(2===p.length)v=t.LUMINANCE,p=[p[0],p[1],1],f=n(f.data,p,[f.stride[0],f.stride[1],1],f.offset);else{if(3!==p.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===p[2])v=t.ALPHA;else if(2===p[2])v=t.LUMINANCE_ALPHA;else if(3===p[2])v=t.RGB;else{if(4!==p[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");v=t.RGBA}p[2]}v!==t.LUMINANCE&&v!==t.ALPHA||s!==t.LUMINANCE&&s!==t.ALPHA||(v=s);if(v!==s)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var m=f.size,b=h.indexOf(a)<0;b&&h.push(a);if(d===u&&y)0===f.offset&&f.data.length===m?b?t.texImage2D(t.TEXTURE_2D,a,s,p[0],p[1],0,s,u,f.data):t.texSubImage2D(t.TEXTURE_2D,a,e,r,p[0],p[1],s,u,f.data):b?t.texImage2D(t.TEXTURE_2D,a,s,p[0],p[1],0,s,u,f.data.subarray(f.offset,f.offset+m)):t.texSubImage2D(t.TEXTURE_2D,a,e,r,p[0],p[1],s,u,f.data.subarray(f.offset,f.offset+m));else{var w;w=u===t.FLOAT?o.mallocFloat32(m):o.mallocUint8(m);var _=n(w,p,[p[2],p[2]*p[0],1]);d===t.FLOAT&&u===t.UNSIGNED_BYTE?c(_,f):i.assign(_,f),b?t.texImage2D(t.TEXTURE_2D,a,s,p[0],p[1],0,s,u,w.subarray(0,m)):t.texSubImage2D(t.TEXTURE_2D,a,e,r,p[0],p[1],s,u,w.subarray(0,m)),u===t.FLOAT?o.freeFloat32(w):o.freeUint8(w)}}(s,e,r,a,this.format,this.type,this._mipLevels,t)}}},317:function(t,e,r){var n=r(385),i=r(786);t.exports=function(t){var e=Array.apply(null,new Array(16)).map(Number.prototype.valueOf,255),r=i(new Uint8Array(e),[2,2,4]);return n(t,r)}},545:function(t,e){e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,h=u>>1,f=-7,c=r?i-1:0,l=r?-1:1,p=t[e+c];for(c+=l,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+t[e+c],c+=l,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=256*a+t[e+c],c+=l,f-=8);if(0===o)o=1-h;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=h}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,h=8*o-i-1,f=(1<<h)-1,c=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+c>=1?l/u:l*Math.pow(2,1-c))*u>=2&&(a++,u/=2),a+c>=f?(s=0,a=f):a+c>=1?(s=(e*u-1)*Math.pow(2,i),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,h+=i;h>0;t[r+p]=255&a,p+=d,a/=256,h-=8);t[r+p-d]|=128*g}},379:function(t){"use strict";t.exports=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}},110:function(t){function e(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},577:function(t,e,r){var n=r(288),i=r(188),o=r(410).L,a=(r(611).colorToFloat,r(919)),s=new n({Mixins:a,initialize:function(t,e){o.call(this,t),e=e||{};var r=this._createShader();this.idx=0,this.mesh=this._createMesh(e.size),a.call(this,this.context.gl,r)},_createMesh:function(t){if((t=t||500)>10922)throw"Can't have more than 10922 sprites per batch: "+t;var e=4*t*this.getVertexSize(),r=6*t,n=this.context.gl;this.vertices=new Float32Array(e),this.indices=new Uint16Array(r);for(var o=0,a=0;o<r;o+=6,a+=4)this.indices[o+0]=a+0,this.indices[o+1]=a+1,this.indices[o+2]=a+2,this.indices[o+3]=a+0,this.indices[o+4]=a+2,this.indices[o+5]=a+3;var s=new i(this.context,!1,e,r,this._createVertexAttributes());return s.vertices=this.vertices,s.indices=this.indices,s.vertexUsage=n.DYNAMIC_DRAW,s.indexUsage=n.STATIC_DRAW,s.dirty=!0,s},_createShader:function(){throw"_createShader not implemented"},_createVertexAttributes:function(){throw"_createVertexAttributes not implemented"},getVertexSize:function(){throw"getVertexSize not implemented"},begin:function(){if(this.drawing)throw"batch.end() must be called before begin";if(this.drawing=!0,this.shader.bind(),this.mesh.bind(this.shader),this._blendingEnabled){var t=this.context.gl;t.enable(t.BLEND)}},end:function(){if(!this.drawing)throw"batch.begin() must be called before end";if(this.idx>0&&this.flush(),this.drawing=!1,this.mesh.unbind(this.shader),this._blendingEnabled){var t=this.context.gl;t.disable(t.BLEND)}},_preRender:function(){},flush:function(){if(0!==this.idx){var t=this.context.gl;this._blendingEnabled&&this._blendSrc&&this._blendDst&&t.blendFunc(this._blendSrc,this._blendDst),this._preRender();var e=this.getVertexSize(),r=this.idx/(4*e);this.mesh.verticesDirty=!0,this.mesh.draw(t.TRIANGLES,6*r,0,this.idx),this.idx=0}},destroy:function(){this.vertices=null,this.indices=null,this.maxVertices=0,this.ownsShader&&this.defaultShader&&this.defaultShader.destroy(),this.defaultShader=null,this._shader=null,this.mesh&&this.mesh.destroy(),this.mesh=null}});t.exports=s},919:function(t,e,r){var n=r(611).colorToFloat,i=r(288);t.exports=new i({initialize:function(t,e){this._blendSrc=t.ONE,this._blendDst=t.ONE_MINUS_SRC_ALPHA,this._blendingEnabled=!0,this._shader=e,this.defaultShader=this._shader,this.ownsShader=!0,this.drawing=!1,this.color=n(255,255,255,255),this.premultiplied=!0},blendingEnabled:{set:function(t){var e=this._blendingEnabled;if(this.drawing&&this.flush(),this._blendingEnabled=t,this.drawing&&e!=t){var r=this.context.gl;t?r.enable(r.BLEND):r.disable(r.BLEND)}},get:function(){return this._blendingEnabled}},blendSrc:{set:function(t){this.drawing&&this.flush(),this._blendSrc=t},get:function(){return this._blendSrc}},blendDst:{set:function(t){this.drawing&&this.flush(),this._blendDst=t},get:function(){return this._blendDst}},setBlendFunction:function(t,e){this.blendSrc=t,this.blendDst=e},shader:{set:function(t){var e=this.drawing;e&&this.end(),this._shader=t||this.defaultShader,e&&this.begin()},get:function(){return this._shader}},setColor:function(t,e,r,i){var o="number"===typeof t;o&&"number"===typeof e&&"number"===typeof r?i="number"===typeof i?i:1:t=e=r=i=o?t:1,this.premultiplied&&(t*=i,e*=i,r*=i),this.color=n(~~(255*t),~~(255*e),~~(255*r),~~(255*i))}})},141:function(t,e,r){var n=r(288),i=r(188),o=r(601),a=r(577),s=r(45)._E,u=new n({Mixins:a,initialize:function t(e,r){if(!(this instanceof t))return new t(e,r);a.call(this,e,r),this.projection=s.create(),this.texture=null},resize:function(t,e){this.setProjection(t/2,e/2)},getVertexSize:function(){return u.VERTEX_SIZE},_createVertexAttributes:function(){var t=this.context.gl;return[new i.Attrib(o.POSITION_ATTRIBUTE,2),new i.Attrib(o.COLOR_ATTRIBUTE,4,null,t.UNSIGNED_BYTE,!0,1),new i.Attrib(o.TEXCOORD_ATTRIBUTE+"0",2)]},setProjection:function(t){this.projection=t,!this.drawing||x==oldX&&y==oldY||(this.flush(),this.updateMatrices())},_createShader:function(){var t=new o(this.context,u.DEFAULT_VERT_SHADER,u.DEFAULT_FRAG_SHADER);return t.log&&console.warn("Shader Log:\n"+t.log),t},updateMatrices:function(){this.shader.setUniformMatrix4("u_projection",this.projection)},_preRender:function(){this.texture&&this.texture.bind()},begin:function(){var t=this.context.gl;a.prototype.begin.call(this),this.updateMatrices(),this.shader.setUniformi("u_texture0",0),t.depthMask(!1)},end:function(){var t=this.context.gl;a.prototype.end.call(this),t.depthMask(!0)},flush:function(){this.texture&&0!==this.idx&&(a.prototype.flush.call(this),u.totalRenderCalls++)},drawRegion:function(t,e,r,n,i){this.draw(t.texture,e,r,n,i,t.u,t.v,t.u2,t.v2)},draw:function(t,e,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,c=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,l=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:1;if(!this.drawing)throw"Illegal State: trying to draw a batch before begin()";if(t){null===this.texture||this.texture.id!==t.id?(this.flush(),this.texture=t):this.idx==this.vertices.length&&this.flush(),e=e||0,r=r||0;var d=-o,g=(n=0===n?n:n||t.width)-o,v=n-o,y=-o,m=-a,b=-a,w=(i=0===i?i:i||t.height)-a,_=i-a,x=this.color;if(1!==u&&(d*=u,g*=u,v*=u,y*=u),1!==h&&(m*=h,b*=h,w*=h,_*=h),0!==s){var E=Math.cos(s),T=Math.sin(s),A=E*d-T*m,I=T*d+E*m,M=E*g-T*b,R=T*g+E*b,L=E*v-T*w,O=T*v+E*w,S=E*y-T*_,U=T*y+E*_;d=A,g=M,v=L,y=S,m=I,b=R,w=O,_=U}d+=e+o,g+=e+o,v+=e+o,y+=e+o,m+=r+a,b+=r+a,w+=r+a,_+=r+a,this.vertices[this.idx++]=d,this.vertices[this.idx++]=m,this.vertices[this.idx++]=x,this.vertices[this.idx++]=f,this.vertices[this.idx++]=c,this.vertices[this.idx++]=g,this.vertices[this.idx++]=b,this.vertices[this.idx++]=x,this.vertices[this.idx++]=l,this.vertices[this.idx++]=c,this.vertices[this.idx++]=v,this.vertices[this.idx++]=w,this.vertices[this.idx++]=x,this.vertices[this.idx++]=l,this.vertices[this.idx++]=p,this.vertices[this.idx++]=y,this.vertices[this.idx++]=_,this.vertices[this.idx++]=x,this.vertices[this.idx++]=f,this.vertices[this.idx++]=p}},drawVertices:function(t,e,r){if(!this.drawing)throw"Illegal State: trying to draw a batch before begin()";t&&(this.texture!=t?(this.flush(),this.texture=t):this.idx==this.vertices.length&&this.flush(),r=r||0,this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++],this.vertices[this.idx++]=e[r++])}});u.VERTEX_SIZE=5,u.totalRenderCalls=0,u.DEFAULT_FRAG_SHADER=["precision mediump float;","varying vec2 vTexCoord0;","varying vec4 vColor;","uniform sampler2D u_texture0;","void main(void) {","   gl_FragColor = texture2D(u_texture0, vTexCoord0) * vColor;","}"].join("\n"),u.DEFAULT_VERT_SHADER=["attribute vec4 "+o.POSITION_ATTRIBUTE+";","attribute vec4 "+o.COLOR_ATTRIBUTE+";","attribute vec2 "+o.TEXCOORD_ATTRIBUTE+"0;","uniform mat4 u_projection;","varying vec2 vTexCoord0;","varying vec4 vColor;","void main(void) {","   gl_Position =  u_projection * "+o.POSITION_ATTRIBUTE+";","   vTexCoord0 = "+o.TEXCOORD_ATTRIBUTE+"0;","   vColor = "+o.COLOR_ATTRIBUTE+";","   vColor.a = vColor.a * (256.0/255.0);","}"].join("\n"),t.exports=u},45:function(t,e,r){"use strict";r.d(e,{_E:function(){return n}});var n={};r.r(n),r.d(n,{add:function(){return X},adjoint:function(){return d},clone:function(){return s},copy:function(){return u},create:function(){return a},determinant:function(){return g},equals:function(){return Z},exactEquals:function(){return K},frob:function(){return G},fromQuat:function(){return P},fromQuat2:function(){return O},fromRotation:function(){return A},fromRotationTranslation:function(){return L},fromRotationTranslationScale:function(){return B},fromRotationTranslationScaleOrigin:function(){return D},fromScaling:function(){return T},fromTranslation:function(){return E},fromValues:function(){return h},fromXRotation:function(){return I},fromYRotation:function(){return M},fromZRotation:function(){return R},frustum:function(){return N},getRotation:function(){return C},getScaling:function(){return U},getTranslation:function(){return S},identity:function(){return c},invert:function(){return p},lookAt:function(){return V},mul:function(){return Q},multiply:function(){return v},multiplyScalar:function(){return q},multiplyScalarAndAdd:function(){return z},ortho:function(){return F},perspective:function(){return j},perspectiveFromFieldOfView:function(){return k},rotate:function(){return b},rotateX:function(){return w},rotateY:function(){return _},rotateZ:function(){return x},scale:function(){return m},set:function(){return f},str:function(){return W},sub:function(){return $},subtract:function(){return Y},targetTo:function(){return H},translate:function(){return y},transpose:function(){return l}});var i=1e-6,o="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function a(){var t=new o(16);return o!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function s(t){var e=new o(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function h(t,e,r,n,i,a,s,u,h,f,c,l,p,d,g,v){var y=new o(16);return y[0]=t,y[1]=e,y[2]=r,y[3]=n,y[4]=i,y[5]=a,y[6]=s,y[7]=u,y[8]=h,y[9]=f,y[10]=c,y[11]=l,y[12]=p,y[13]=d,y[14]=g,y[15]=v,y}function f(t,e,r,n,i,o,a,s,u,h,f,c,l,p,d,g,v){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=h,t[9]=f,t[10]=c,t[11]=l,t[12]=p,t[13]=d,t[14]=g,t[15]=v,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function p(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],f=e[8],c=e[9],l=e[10],p=e[11],d=e[12],g=e[13],v=e[14],y=e[15],m=r*s-n*a,b=r*u-i*a,w=r*h-o*a,_=n*u-i*s,x=n*h-o*s,E=i*h-o*u,T=f*g-c*d,A=f*v-l*d,I=f*y-p*d,M=c*v-l*g,R=c*y-p*g,L=l*y-p*v,O=m*L-b*R+w*M+_*I-x*A+E*T;return O?(O=1/O,t[0]=(s*L-u*R+h*M)*O,t[1]=(i*R-n*L-o*M)*O,t[2]=(g*E-v*x+y*_)*O,t[3]=(l*x-c*E-p*_)*O,t[4]=(u*I-a*L-h*A)*O,t[5]=(r*L-i*I+o*A)*O,t[6]=(v*w-d*E-y*b)*O,t[7]=(f*E-l*w+p*b)*O,t[8]=(a*R-s*I+h*T)*O,t[9]=(n*I-r*R-o*T)*O,t[10]=(d*x-g*w+y*m)*O,t[11]=(c*w-f*x-p*m)*O,t[12]=(s*A-a*M-u*T)*O,t[13]=(r*M-n*A+i*T)*O,t[14]=(g*b-d*_-v*m)*O,t[15]=(f*_-c*b+l*m)*O,t):null}function d(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],f=e[8],c=e[9],l=e[10],p=e[11],d=e[12],g=e[13],v=e[14],y=e[15];return t[0]=s*(l*y-p*v)-c*(u*y-h*v)+g*(u*p-h*l),t[1]=-(n*(l*y-p*v)-c*(i*y-o*v)+g*(i*p-o*l)),t[2]=n*(u*y-h*v)-s*(i*y-o*v)+g*(i*h-o*u),t[3]=-(n*(u*p-h*l)-s*(i*p-o*l)+c*(i*h-o*u)),t[4]=-(a*(l*y-p*v)-f*(u*y-h*v)+d*(u*p-h*l)),t[5]=r*(l*y-p*v)-f*(i*y-o*v)+d*(i*p-o*l),t[6]=-(r*(u*y-h*v)-a*(i*y-o*v)+d*(i*h-o*u)),t[7]=r*(u*p-h*l)-a*(i*p-o*l)+f*(i*h-o*u),t[8]=a*(c*y-p*g)-f*(s*y-h*g)+d*(s*p-h*c),t[9]=-(r*(c*y-p*g)-f*(n*y-o*g)+d*(n*p-o*c)),t[10]=r*(s*y-h*g)-a*(n*y-o*g)+d*(n*h-o*s),t[11]=-(r*(s*p-h*c)-a*(n*p-o*c)+f*(n*h-o*s)),t[12]=-(a*(c*v-l*g)-f*(s*v-u*g)+d*(s*l-u*c)),t[13]=r*(c*v-l*g)-f*(n*v-i*g)+d*(n*l-i*c),t[14]=-(r*(s*v-u*g)-a*(n*v-i*g)+d*(n*u-i*s)),t[15]=r*(s*l-u*c)-a*(n*l-i*c)+f*(n*u-i*s),t}function g(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],h=t[8],f=t[9],c=t[10],l=t[11],p=t[12],d=t[13],g=t[14],v=t[15];return(e*a-r*o)*(c*v-l*g)-(e*s-n*o)*(f*v-l*d)+(e*u-i*o)*(f*g-c*d)+(r*s-n*a)*(h*v-l*p)-(r*u-i*a)*(h*g-c*p)+(n*u-i*s)*(h*d-f*p)}function v(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],f=e[7],c=e[8],l=e[9],p=e[10],d=e[11],g=e[12],v=e[13],y=e[14],m=e[15],b=r[0],w=r[1],_=r[2],x=r[3];return t[0]=b*n+w*s+_*c+x*g,t[1]=b*i+w*u+_*l+x*v,t[2]=b*o+w*h+_*p+x*y,t[3]=b*a+w*f+_*d+x*m,b=r[4],w=r[5],_=r[6],x=r[7],t[4]=b*n+w*s+_*c+x*g,t[5]=b*i+w*u+_*l+x*v,t[6]=b*o+w*h+_*p+x*y,t[7]=b*a+w*f+_*d+x*m,b=r[8],w=r[9],_=r[10],x=r[11],t[8]=b*n+w*s+_*c+x*g,t[9]=b*i+w*u+_*l+x*v,t[10]=b*o+w*h+_*p+x*y,t[11]=b*a+w*f+_*d+x*m,b=r[12],w=r[13],_=r[14],x=r[15],t[12]=b*n+w*s+_*c+x*g,t[13]=b*i+w*u+_*l+x*v,t[14]=b*o+w*h+_*p+x*y,t[15]=b*a+w*f+_*d+x*m,t}function y(t,e,r){var n=r[0],i=r[1],o=r[2],a=void 0,s=void 0,u=void 0,h=void 0,f=void 0,c=void 0,l=void 0,p=void 0,d=void 0,g=void 0,v=void 0,y=void 0;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*o+e[12],t[13]=e[1]*n+e[5]*i+e[9]*o+e[13],t[14]=e[2]*n+e[6]*i+e[10]*o+e[14],t[15]=e[3]*n+e[7]*i+e[11]*o+e[15]):(a=e[0],s=e[1],u=e[2],h=e[3],f=e[4],c=e[5],l=e[6],p=e[7],d=e[8],g=e[9],v=e[10],y=e[11],t[0]=a,t[1]=s,t[2]=u,t[3]=h,t[4]=f,t[5]=c,t[6]=l,t[7]=p,t[8]=d,t[9]=g,t[10]=v,t[11]=y,t[12]=a*n+f*i+d*o+e[12],t[13]=s*n+c*i+g*o+e[13],t[14]=u*n+l*i+v*o+e[14],t[15]=h*n+p*i+y*o+e[15]),t}function m(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function b(t,e,r,n){var o,a,s,u,h,f,c,l,p,d,g,v,y,m,b,w,_,x,E,T,A,I,M,R,L=n[0],O=n[1],S=n[2],U=Math.sqrt(L*L+O*O+S*S);return U<i?null:(L*=U=1/U,O*=U,S*=U,o=Math.sin(r),s=1-(a=Math.cos(r)),u=e[0],h=e[1],f=e[2],c=e[3],l=e[4],p=e[5],d=e[6],g=e[7],v=e[8],y=e[9],m=e[10],b=e[11],w=L*L*s+a,_=O*L*s+S*o,x=S*L*s-O*o,E=L*O*s-S*o,T=O*O*s+a,A=S*O*s+L*o,I=L*S*s+O*o,M=O*S*s-L*o,R=S*S*s+a,t[0]=u*w+l*_+v*x,t[1]=h*w+p*_+y*x,t[2]=f*w+d*_+m*x,t[3]=c*w+g*_+b*x,t[4]=u*E+l*T+v*A,t[5]=h*E+p*T+y*A,t[6]=f*E+d*T+m*A,t[7]=c*E+g*T+b*A,t[8]=u*I+l*M+v*R,t[9]=h*I+p*M+y*R,t[10]=f*I+d*M+m*R,t[11]=c*I+g*M+b*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function w(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],u=e[7],h=e[8],f=e[9],c=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+h*n,t[5]=a*i+f*n,t[6]=s*i+c*n,t[7]=u*i+l*n,t[8]=h*i-o*n,t[9]=f*i-a*n,t[10]=c*i-s*n,t[11]=l*i-u*n,t}function _(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],h=e[8],f=e[9],c=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-h*n,t[1]=a*i-f*n,t[2]=s*i-c*n,t[3]=u*i-l*n,t[8]=o*n+h*i,t[9]=a*n+f*i,t[10]=s*n+c*i,t[11]=u*n+l*i,t}function x(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],h=e[4],f=e[5],c=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+h*n,t[1]=a*i+f*n,t[2]=s*i+c*n,t[3]=u*i+l*n,t[4]=h*i-o*n,t[5]=f*i-a*n,t[6]=c*i-s*n,t[7]=l*i-u*n,t}function E(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function T(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,e,r){var n,o,a,s=r[0],u=r[1],h=r[2],f=Math.sqrt(s*s+u*u+h*h);return f<i?null:(s*=f=1/f,u*=f,h*=f,n=Math.sin(e),a=1-(o=Math.cos(e)),t[0]=s*s*a+o,t[1]=u*s*a+h*n,t[2]=h*s*a-u*n,t[3]=0,t[4]=s*u*a-h*n,t[5]=u*u*a+o,t[6]=h*u*a+s*n,t[7]=0,t[8]=s*h*a+u*n,t[9]=u*h*a-s*n,t[10]=h*h*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function I(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=n+n,u=i+i,h=o+o,f=n*s,c=n*u,l=n*h,p=i*u,d=i*h,g=o*h,v=a*s,y=a*u,m=a*h;return t[0]=1-(p+g),t[1]=c+m,t[2]=l-y,t[3]=0,t[4]=c-m,t[5]=1-(f+g),t[6]=d+v,t[7]=0,t[8]=l+y,t[9]=d-v,t[10]=1-(f+p),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function O(t,e){var r=new o(3),n=-e[0],i=-e[1],a=-e[2],s=e[3],u=e[4],h=e[5],f=e[6],c=e[7],l=n*n+i*i+a*a+s*s;return l>0?(r[0]=2*(u*s+c*n+h*a-f*i)/l,r[1]=2*(h*s+c*i+f*n-u*a)/l,r[2]=2*(f*s+c*a+u*i-h*n)/l):(r[0]=2*(u*s+c*n+h*a-f*i),r[1]=2*(h*s+c*i+f*n-u*a),r[2]=2*(f*s+c*a+u*i-h*n)),L(t,e,r),t}function S(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function U(t,e){var r=e[0],n=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],h=e[9],f=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(o*o+a*a+s*s),t[2]=Math.sqrt(u*u+h*h+f*f),t}function C(t,e){var r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function B(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,h=o+o,f=a+a,c=i*u,l=i*h,p=i*f,d=o*h,g=o*f,v=a*f,y=s*u,m=s*h,b=s*f,w=n[0],_=n[1],x=n[2];return t[0]=(1-(d+v))*w,t[1]=(l+b)*w,t[2]=(p-m)*w,t[3]=0,t[4]=(l-b)*_,t[5]=(1-(c+v))*_,t[6]=(g+y)*_,t[7]=0,t[8]=(p+m)*x,t[9]=(g-y)*x,t[10]=(1-(c+d))*x,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function D(t,e,r,n,i){var o=e[0],a=e[1],s=e[2],u=e[3],h=o+o,f=a+a,c=s+s,l=o*h,p=o*f,d=o*c,g=a*f,v=a*c,y=s*c,m=u*h,b=u*f,w=u*c,_=n[0],x=n[1],E=n[2],T=i[0],A=i[1],I=i[2],M=(1-(g+y))*_,R=(p+w)*_,L=(d-b)*_,O=(p-w)*x,S=(1-(l+y))*x,U=(v+m)*x,C=(d+b)*E,B=(v-m)*E,D=(1-(l+g))*E;return t[0]=M,t[1]=R,t[2]=L,t[3]=0,t[4]=O,t[5]=S,t[6]=U,t[7]=0,t[8]=C,t[9]=B,t[10]=D,t[11]=0,t[12]=r[0]+T-(M*T+O*A+C*I),t[13]=r[1]+A-(R*T+S*A+B*I),t[14]=r[2]+I-(L*T+U*A+D*I),t[15]=1,t}function P(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,h=r*a,f=n*a,c=n*s,l=i*a,p=i*s,d=i*u,g=o*a,v=o*s,y=o*u;return t[0]=1-c-d,t[1]=f+y,t[2]=l-v,t[3]=0,t[4]=f-y,t[5]=1-h-d,t[6]=p+g,t[7]=0,t[8]=l+v,t[9]=p-g,t[10]=1-h-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,e,r,n,i,o,a){var s=1/(r-e),u=1/(i-n),h=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*u,t[10]=(a+o)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*h,t[15]=0,t}function j(t,e,r,n,i){var o=1/Math.tan(e/2),a=void 0;return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(n-i),t[10]=(i+n)*a,t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n),t}function k(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),h=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*h*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function F(t,e,r,n,i,o,a){var s=1/(e-r),u=1/(n-i),h=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(a+o)*h,t[15]=1,t}function V(t,e,r,n){var o=void 0,a=void 0,s=void 0,u=void 0,h=void 0,f=void 0,l=void 0,p=void 0,d=void 0,g=void 0,v=e[0],y=e[1],m=e[2],b=n[0],w=n[1],_=n[2],x=r[0],E=r[1],T=r[2];return Math.abs(v-x)<i&&Math.abs(y-E)<i&&Math.abs(m-T)<i?c(t):(l=v-x,p=y-E,d=m-T,o=w*(d*=g=1/Math.sqrt(l*l+p*p+d*d))-_*(p*=g),a=_*(l*=g)-b*d,s=b*p-w*l,(g=Math.sqrt(o*o+a*a+s*s))?(o*=g=1/g,a*=g,s*=g):(o=0,a=0,s=0),u=p*s-d*a,h=d*o-l*s,f=l*a-p*o,(g=Math.sqrt(u*u+h*h+f*f))?(u*=g=1/g,h*=g,f*=g):(u=0,h=0,f=0),t[0]=o,t[1]=u,t[2]=l,t[3]=0,t[4]=a,t[5]=h,t[6]=p,t[7]=0,t[8]=s,t[9]=f,t[10]=d,t[11]=0,t[12]=-(o*v+a*y+s*m),t[13]=-(u*v+h*y+f*m),t[14]=-(l*v+p*y+d*m),t[15]=1,t)}function H(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=n[0],u=n[1],h=n[2],f=i-r[0],c=o-r[1],l=a-r[2],p=f*f+c*c+l*l;p>0&&(f*=p=1/Math.sqrt(p),c*=p,l*=p);var d=u*l-h*c,g=h*f-s*l,v=s*c-u*f;return(p=d*d+g*g+v*v)>0&&(d*=p=1/Math.sqrt(p),g*=p,v*=p),t[0]=d,t[1]=g,t[2]=v,t[3]=0,t[4]=c*v-l*g,t[5]=l*d-f*v,t[6]=f*g-c*d,t[7]=0,t[8]=f,t[9]=c,t[10]=l,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function W(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function G(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function X(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Y(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function q(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function z(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function K(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Z(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],s=t[4],u=t[5],h=t[6],f=t[7],c=t[8],l=t[9],p=t[10],d=t[11],g=t[12],v=t[13],y=t[14],m=t[15],b=e[0],w=e[1],_=e[2],x=e[3],E=e[4],T=e[5],A=e[6],I=e[7],M=e[8],R=e[9],L=e[10],O=e[11],S=e[12],U=e[13],C=e[14],B=e[15];return Math.abs(r-b)<=i*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-w)<=i*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(o-_)<=i*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-x)<=i*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(s-E)<=i*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-T)<=i*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(h-A)<=i*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(f-I)<=i*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(c-M)<=i*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(l-R)<=i*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(p-L)<=i*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(d-O)<=i*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(g-S)<=i*Math.max(1,Math.abs(g),Math.abs(S))&&Math.abs(v-U)<=i*Math.max(1,Math.abs(v),Math.abs(U))&&Math.abs(y-C)<=i*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(m-B)<=i*Math.max(1,Math.abs(m),Math.abs(B))}var Q=v,$=Y},188:function(t,e,r){var n=r(288),i=r(410).L,o=new n({dirty:{set:function(t){this.verticesDirty=t,this.indicesDirty=t}},initialize:function(t,e,r,n,o){if(!r)throw"numVerts not specified, must be > 0";i.call(this,t),this.gl=this.context.gl,this.numVerts=null,this.numIndices=null,this.vertices=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.verticesDirty=!0,this.indicesDirty=!0,this.indexUsage=null,this.vertexUsage=null,this._vertexAttribs=null,this.vertexStride=null,this.numVerts=r,this.numIndices=n||0,this.vertexUsage=e?this.gl.STATIC_DRAW:this.gl.DYNAMIC_DRAW,this.indexUsage=e?this.gl.STATIC_DRAW:this.gl.DYNAMIC_DRAW,this._vertexAttribs=o||[],this.indicesDirty=!0,this.verticesDirty=!0;for(var a=0,s=0;s<this._vertexAttribs.length;s++)a+=this._vertexAttribs[s].offsetCount;this.vertexStride=4*a,this.vertices=new Float32Array(this.numVerts),this.indices=new Uint16Array(this.numIndices),this.context.addManagedObject(this),this.create()},create:function(){this.gl=this.context.gl;var t=this.gl;this.vertexBuffer=t.createBuffer(),this.indexBuffer=this.numIndices>0?t.createBuffer():null,this.dirty=!0},destroy:function(){this.vertices=null,this.indices=null,this.vertexBuffer&&this.gl&&this.gl.deleteBuffer(this.vertexBuffer),this.indexBuffer&&this.gl&&this.gl.deleteBuffer(this.indexBuffer),this.vertexBuffer=null,this.indexBuffer=null,this.context&&this.context.removeManagedObject(this),this.gl=null,this.context=null},_updateBuffers:function(t,e){var r=this.gl;if(this.numIndices>0&&(t||r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.indicesDirty&&(r.bufferData(r.ELEMENT_ARRAY_BUFFER,this.indices,this.indexUsage),this.indicesDirty=!1)),t||r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer),this.verticesDirty){if(e){var n=this.vertices.subarray(0,e);r.bufferSubData(r.ARRAY_BUFFER,0,n)}else r.bufferData(r.ARRAY_BUFFER,this.vertices,this.vertexUsage);this.verticesDirty=!1}},draw:function(t,e,r,n){if(0!==e){var i=this.gl;r=r||0,this._updateBuffers(!0,n),this.numIndices>0?i.drawElements(t,e,i.UNSIGNED_SHORT,2*r):i.drawArrays(t,r,e)}},bind:function(t){var e=this.gl,r=0,n=this.vertexStride;this._updateBuffers();for(var i=0;i<this._vertexAttribs.length;i++){var o=this._vertexAttribs[i],a=null===o.location?t.getAttributeLocation(o.name):o.location;e.enableVertexAttribArray(a),e.vertexAttribPointer(a,o.numComponents,o.type||e.FLOAT,o.normalize,n,r),r+=4*o.offsetCount}},unbind:function(t){for(var e=this.gl,r=0;r<this._vertexAttribs.length;r++){var n=this._vertexAttribs[r],i=null===n.location?t.getAttributeLocation(n.name):n.location;e.disableVertexAttribArray(i)}}});o.Attrib=new n({name:null,numComponents:null,location:null,type:null,initialize:function(t,e,r,n,i,o){this.name=t,this.numComponents=e,this.location="number"===typeof r?r:null,this.type=n,this.normalize=Boolean(i),this.offsetCount="number"===typeof o?o:this.numComponents}}),t.exports=o},601:function(t,e,r){var n=r(288),i=r(185),o=r(410).Q,a=new n({initialize:function(t,e,r,n){if(!e||!r)throw"vertex and fragment shaders must be defined";if(!t||"object"!==typeof t)throw"valid GL context not specified to ShaderProgram";this.context=o(t),this.vertShader=null,this.fragShader=null,this.program=null,this.log="",this.uniformCache=null,this.attributeCache=null,this.attributeLocations=n,this.vertSource=e.trim(),this.fragSource=r.trim(),this.context.addManagedObject(this),this.create()},create:function(){this.gl=this.context.gl,this._compileShaders()},_compileShaders:function(){var t=this.gl,e=i({gl:t,vertex:this.vertSource,fragment:this.fragSource,verbose:a.VERBOSE_COMPILE,attributeLocations:this.attributeLocations});this.log=e.log,this.program=e.program,this.vertShader=e.vertex,this.fragShader=e.fragment,a.VERBOSE_COMPILE&&this.log&&console.warn(this.log),this._fetchUniforms(),this._fetchAttributes()},_fetchUniforms:function(){var t=this.gl;this.uniformCache={};var e=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS);if(e)for(var r=0;r<e;r++){var n=t.getActiveUniform(this.program,r);if(null!==n){var i=n.name,o=t.getUniformLocation(this.program,i);this.uniformCache[i]={size:n.size,type:n.type,location:o}}}},_fetchAttributes:function(){var t=this.gl;this.attributeCache={};var e=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES);if(e)for(var r=0;r<e;r++){var n=t.getActiveAttrib(this.program,r);if(null!==n){var i=n.name,o=t.getAttribLocation(this.program,i);this.attributeCache[i]={size:n.size,type:n.type,location:o}}}},bind:function(){this.gl.useProgram(this.program)},destroy:function(){if(this.context&&this.context.removeManagedObject(this),this.gl&&this.program){var t=this.gl;t.detachShader(this.program,this.vertShader),t.detachShader(this.program,this.fragShader),t.deleteShader(this.vertShader),t.deleteShader(this.fragShader),t.deleteProgram(this.program)}this.attributeCache=null,this.uniformCache=null,this.vertShader=null,this.fragShader=null,this.program=null,this.gl=null,this.context=null},getUniformInfo:function(t){return this.uniformCache[t]||null},getAttributeInfo:function(t){return this.attributeCache[t]||null},getAttributeLocation:function(t){var e=this.getAttributeInfo(t);return e?e.location:null},getUniformLocation:function(t){var e=this.getUniformInfo(t);return e?e.location:null},hasUniform:function(t){return null!==this.getUniformInfo(t)},hasAttribute:function(t){return null!==this.getAttributeInfo(t)},getUniform:function(t){return this.gl.getUniform(this.program,this.getUniformLocation(t))},getUniformAt:function(t){return this.gl.getUniform(this.program,t)},setUniformi:function(t,e,r,n,i){"use strict";var o=this.gl,a=this.getUniformLocation(t);if(null===a)return!1;switch(arguments.length){case 2:return o.uniform1i(a,e),!0;case 3:return o.uniform2i(a,e,r),!0;case 4:return o.uniform3i(a,e,r,n),!0;case 5:return o.uniform4i(a,e,r,n,i),!0;default:throw"invalid arguments to setUniformi"}},setUniformf:function(t,e,r,n,i){"use strict";var o=this.gl,a=this.getUniformLocation(t);if(null===a)return!1;switch(arguments.length){case 2:return o.uniform1f(a,e),!0;case 3:return o.uniform2f(a,e,r),!0;case 4:return o.uniform3f(a,e,r,n),!0;case 5:return o.uniform4f(a,e,r,n,i),!0;default:throw"invalid arguments to setUniformf"}},setUniformfv:function(t,e,r){"use strict";r=r||e.length;var n=this.gl,i=this.getUniformLocation(t);if(null===i)return!1;switch(r){case 1:return n.uniform1fv(i,e),!0;case 2:return n.uniform2fv(i,e),!0;case 3:return n.uniform3fv(i,e),!0;case 4:return n.uniform4fv(i,e),!0;default:throw"invalid arguments to setUniformf"}},setUniformiv:function(t,e,r){"use strict";r=r||e.length;var n=this.gl,i=this.getUniformLocation(t);if(null===i)return!1;switch(r){case 1:return n.uniform1iv(i,e),!0;case 2:return n.uniform2iv(i,e),!0;case 3:return n.uniform3iv(i,e),!0;case 4:return n.uniform4iv(i,e),!0;default:throw"invalid arguments to setUniformf"}},setUniformMatrix3:function(t,e,r){"use strict";var n="object"===typeof e&&e.val?e.val:e;r=!!r;var i=this.gl,o=this.getUniformLocation(t);if(null===o)return!1;i.uniformMatrix3fv(o,r,n)},setUniformMatrix4:function(t,e,r){"use strict";var n="object"===typeof e&&e.val?e.val:e;r=!!r;var i=this.gl,o=this.getUniformLocation(t);if(null===o)return!1;i.uniformMatrix4fv(o,r,n)}});a.POSITION_ATTRIBUTE="Position",a.NORMAL_ATTRIBUTE="Normal",a.COLOR_ATTRIBUTE="Color",a.TEXCOORD_ATTRIBUTE="TexCoord",a.VERBOSE_COMPILE=!0,t.exports=a},410:function(t,e,r){var n=r(830);function i(t){var e=t&&t.rawgl?t.rawgl:t;return"undefined"!==typeof window.WebGLRenderingContext&&e instanceof window.WebGLRenderingContext?new n(t):t}t.exports.Q=i,t.exports.L=function(t){if(!t||"object"!==typeof t)throw"valid GL context not specified";this.context=i(t)}},830:function(t,e,r){var n=new(r(288))({initialize:function(t){this.gl=t},addManagedObject:function(t){},removeManagedObject:function(t){},width:{get:function(){return this.gl.canvas.width},set:function(t){this.gl.canvas.width=t}},height:{get:function(){return this.gl.canvas.height},set:function(t){this.gl.canvas.height=t}}});t.exports=n},288:function(t){function e(t,e,r){var n=r?t[e]:Object.getOwnPropertyDescriptor(t,e);return!r&&n.value&&"object"===typeof n.value&&(n=n.value),!(!n||!function(t){return!!t.get&&"function"===typeof t.get||!!t.set&&"function"===typeof t.set}(n))&&("undefined"===typeof n.enumerable&&(n.enumerable=!0),"undefined"===typeof n.configurable&&(n.configurable=!0),n)}function r(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!!r&&(r.value&&"object"===typeof r.value&&(r=r.value),!1===r.configurable)}function n(t,n,i,a){for(var s in n)if(n.hasOwnProperty(s)){var u=e(n,s,i);if(!1!==u){if(r((a||t).prototype,s)){if(o.ignoreFinals)continue;throw new Error("cannot override final property '"+s+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,s,u)}else t.prototype[s]=n[s]}}function i(t,e){if(e){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++)n(t,e[r].prototype||e[r])}}function o(t){var e,r;if(t||(t={}),t.initialize){if("function"!==typeof t.initialize)throw new Error("initialize must be a function");e=t.initialize,delete t.initialize}else if(t.Extends){var o=t.Extends;e=function(){o.apply(this,arguments)}}else e=function(){};t.Extends?(e.prototype=Object.create(t.Extends.prototype),e.prototype.constructor=e,r=t.Extends,delete t.Extends):e.prototype.constructor=e;var a=null;return t.Mixins&&(a=t.Mixins,delete t.Mixins),i(e,a),n(e,t,!0,r),e}o.extend=n,o.mixin=i,o.ignoreFinals=!1,t.exports=o},812:function(t,e,r){"use strict";var n=r(504),i={body:"",args:[],thisVars:[],localVars:[]};function o(t){if(!t)return i;for(var e=0;e<t.args.length;++e){var r=t.args[e];t.args[e]=0===e?{name:r,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function a(t){for(var e=[],r=0;r<t.args.length;++r)e.push("a"+r);return new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""))(function(t){return n({args:t.args,pre:o(t.pre),body:o(t.body),post:o(t.proc),funcName:t.funcName})}(t))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in s){var r=s[t];e[t]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:t}),e[t+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:t+"eq"}),e[t+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:t+"s"}),e[t+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:t+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in u){var r=u[t];e[t]=a({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:t}),e[t+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var h={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in h){var r=h[t];e[t]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:t}),e[t+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:t+"s"}),e[t+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:t+"eq"}),e[t+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<f.length;++t){var r=f[t];e[r]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),e[r+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}}();var c=["max","min","atan2","pow"];!function(){for(var t=0;t<c.length;++t){var r=c[t];e[r]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),e[r+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),e[r+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),e[r+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}}();var l=["atan2","pow"];!function(){for(var t=0;t<l.length;++t){var r=l[t];e[r+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),e[r+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),e[r+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),e[r+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}}(),e.any=n({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=n({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=n({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},786:function(t,e,r){var n=r(379),i=r(110),o="undefined"!==typeof Float64Array;function a(t,e){return t[0]-e[0]}function s(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(a);var n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=r[t][1];return n}function u(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var i="generic"===t;if(-1===e){var o="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(o)()}if(0===e){o="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",o)(h[t][0])}o=["'use strict'"];var a=n(e),u=a.map((function(t){return"i"+t})),f="this.offset+"+a.map((function(t){return"this.stride["+t+"]*i"+t})).join("+"),c=a.map((function(t){return"b"+t})).join(","),l=a.map((function(t){return"c"+t})).join(",");o.push("function "+r+"(a,"+c+","+l+",d){this.data=a","this.shape=["+c+"]","this.stride=["+l+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),o.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map((function(t){return"this.shape["+t+"]"})).join("*"),"}})"),1===e?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),e<4?(o.push("function "+r+"_order(){"),2===e?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+r+"_set("+u.join(",")+",v){"),i?o.push("return this.data.set("+f+",v)}"):o.push("return this.data["+f+"]=v}"),o.push("proto.get=function "+r+"_get("+u.join(",")+"){"),i?o.push("return this.data.get("+f+")}"):o.push("return this.data["+f+"]}"),o.push("proto.index=function "+r+"_index(",u.join(),"){return "+f+"}"),o.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+a.map((function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")})).join(",")+","+a.map((function(t){return"this.stride["+t+"]"})).join(",")+",this.offset)}");var p=a.map((function(t){return"a"+t+"=this.shape["+t+"]"})),d=a.map((function(t){return"c"+t+"=this.stride["+t+"]"}));o.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+d.join(","));for(var g=0;g<e;++g)o.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");o.push("return new "+r+"(this.data,"+a.map((function(t){return"a"+t})).join(",")+","+a.map((function(t){return"c"+t})).join(",")+",b)}"),o.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+a.map((function(t){return"a"+t+"=this.shape["+t+"]"})).join(",")+","+a.map((function(t){return"b"+t+"=this.stride["+t+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(g=0;g<e;++g)o.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");o.push("return new "+r+"(this.data,"+a.map((function(t){return"a"+t})).join(",")+","+a.map((function(t){return"b"+t})).join(",")+",c)}");var v=new Array(e),y=new Array(e);for(g=0;g<e;++g)v[g]="a[i"+g+"]",y[g]="b[i"+g+"]";o.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map((function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+v.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset");for(g=0;g<e;++g)o.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");return o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map((function(t){return"shape["+t+"]"})).join(",")+","+a.map((function(t){return"stride["+t+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",o.join("\n"))(h[t],s)}var h={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};t.exports=function(t,e,r,n){if(void 0===t)return(0,h.array[0])([]);"number"===typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var a=e.length;if(void 0===r){r=new Array(a);for(var s=a-1,f=1;s>=0;--s)r[s]=f,f*=e[s]}if(void 0===n){n=0;for(s=0;s<a;++s)r[s]<0&&(n-=(e[s]-1)*r[s])}for(var c=function(t){if(i(t))return"buffer";if(o)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),l=h[c];l.length<=a+1;)l.push(u(c,l.length-1));return(0,l[a+1])(t,e,r,n)}},611:function(t){var e=new Int8Array(4),r=new Int32Array(e.buffer,0,1),n=new Float32Array(e.buffer,0,1),i=function(){};i.intBitsToFloat=function(t){return r[0]=t,n[0]},i.floatToIntBits=function(t){return n[0]=t,r[0]},i.intToFloatColor=function(t){return i.intBitsToFloat(4278190079&t)},i.colorToFloat=function(t,e,r,n){return i.intToFloatColor(n<<24|r<<16|e<<8|t)},i.isPowerOfTwo=function(t){return 0===(t&t-1)},i.nextPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},t.exports=i},937:function(t){var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(S){u=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new R(n||[]);return o._invoke=function(t,e,r){var n=c;return function(i,o){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw o;return O()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=A(a,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===c)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=f(t,e,r);if("normal"===u.type){if(n=r.done?d:l,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}(t,r,a),o}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=h;var c="suspendedStart",l="suspendedYield",p="executing",d="completed",g={};function v(){}function y(){}function m(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(L([])));_&&_!==r&&n.call(_,o)&&(b=_);var x=m.prototype=v.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var h=u.arg,c=h.value;return c&&"object"===typeof c&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){h.value=t,a(h)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function A(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=f(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function L(t){if(t){var r=t[o];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:O}}function O(){return{value:e,done:!0}}return y.prototype=m,u(x,"constructor",m),u(m,"constructor",y),y.displayName=u(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(T.prototype),u(T.prototype,a,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new T(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(x),u(x,s,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=L,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(r){"object"===typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},89:function(t,e,r){"use strict";var n=r(789),i=r(638),o=r(918).lW;r.g.__TYPEDARRAY_POOL||(r.g.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var a="undefined"!==typeof Uint8ClampedArray,s="undefined"!==typeof BigUint64Array,u="undefined"!==typeof BigInt64Array,h=r.g.__TYPEDARRAY_POOL;h.UINT8C||(h.UINT8C=i([32,0])),h.BIGUINT64||(h.BIGUINT64=i([32,0])),h.BIGINT64||(h.BIGINT64=i([32,0])),h.BUFFER||(h.BUFFER=i([32,0]));var f=h.DATA,c=h.BUFFER;function l(t){if(t){var e=t.length||t.byteLength,r=n.log2(e);f[r].push(t)}}function p(t){t=n.nextPow2(t);var e=n.log2(t),r=f[e];return r.length>0?r.pop():new ArrayBuffer(t)}function d(t){return new Uint8Array(p(t),0,t)}function g(t){return new Uint16Array(p(2*t),0,t)}function v(t){return new Uint32Array(p(4*t),0,t)}function y(t){return new Int8Array(p(t),0,t)}function m(t){return new Int16Array(p(2*t),0,t)}function b(t){return new Int32Array(p(4*t),0,t)}function w(t){return new Float32Array(p(4*t),0,t)}function _(t){return new Float64Array(p(8*t),0,t)}function x(t){return a?new Uint8ClampedArray(p(t),0,t):d(t)}function E(t){return s?new BigUint64Array(p(8*t),0,t):null}function T(t){return u?new BigInt64Array(p(8*t),0,t):null}function A(t){return new DataView(p(t),0,t)}function I(t){t=n.nextPow2(t);var e=n.log2(t),r=c[e];return r.length>0?r.pop():new o(t)}e.free=function(t){if(o.isBuffer(t))c[n.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength,r=0|n.log2(e);f[r].push(t)}},e.freeUint8=e.freeUint16=e.freeUint32=e.freeBigUint64=e.freeInt8=e.freeInt16=e.freeInt32=e.freeBigInt64=e.freeFloat32=e.freeFloat=e.freeFloat64=e.freeDouble=e.freeUint8Clamped=e.freeDataView=function(t){l(t.buffer)},e.freeArrayBuffer=l,e.freeBuffer=function(t){c[n.log2(t.length)].push(t)},e.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return p(t);switch(e){case"uint8":return d(t);case"uint16":return g(t);case"uint32":return v(t);case"int8":return y(t);case"int16":return m(t);case"int32":return b(t);case"float":case"float32":return w(t);case"double":case"float64":return _(t);case"uint8_clamped":return x(t);case"bigint64":return T(t);case"biguint64":return E(t);case"buffer":return I(t);case"data":case"dataview":return A(t);default:return null}return null},e.mallocArrayBuffer=p,e.mallocUint8=d,e.mallocUint16=g,e.mallocUint32=v,e.mallocInt8=y,e.mallocInt16=m,e.mallocInt32=b,e.mallocFloat32=e.mallocFloat=w,e.mallocFloat64=e.mallocDouble=_,e.mallocUint8Clamped=x,e.mallocBigUint64=E,e.mallocBigInt64=T,e.mallocDataView=A,e.mallocBuffer=I,e.clearCache=function(){for(var t=0;t<32;++t)h.UINT8[t].length=0,h.UINT16[t].length=0,h.UINT32[t].length=0,h.INT8[t].length=0,h.INT16[t].length=0,h.INT32[t].length=0,h.FLOAT[t].length=0,h.DOUBLE[t].length=0,h.BIGUINT64[t].length=0,h.BIGINT64[t].length=0,h.UINT8C[t].length=0,f[t].length=0,c[t].length=0}},5:function(t){"use strict";t.exports=function(t,e,r){return 0===t.length?t:e?(r||t.sort(e),function(t,e){for(var r=1,n=t.length,i=t[0],o=t[0],a=1;a<n;++a)if(o=i,e(i=t[a],o)){if(a===r){r++;continue}t[r++]=i}return t.length=r,t}(t,e)):(r||t.sort(),function(t){for(var e=1,r=t.length,n=t[0],i=t[0],o=1;o<r;++o,i=n)if(i=n,(n=t[o])!==i){if(o===e){e++;continue}t[e++]=n}return t.length=e,t}(t))}},185:function(t,e,r){var n=r(514);function i(t,e,r,n){var i=t.createShader(e);if(!i)return-1;t.shaderSource(i,r),t.compileShader(i);var a=e===t.VERTEX_SHADER?"vertex":"fragment",s=t.getShaderInfoLog(i)||"";if(!t.getShaderParameter(i,t.COMPILE_STATUS))throw n&&(console.error("Shader error:\n"+s),console.error("Problematic "+a+" shader:\n"+o(r))),new Error("Could not compile "+a+" shader:\n"+s);if(!i)throw new Error("gl.createShader returned 0 for "+a+" shader.\n"+s);return{shader:i,log:s}}function o(t){for(var e=t.split("\n"),r=0;r<e.length;r++)e[r]=r+1+": "+e[r];return e.join("\n")}t.exports=function(t){if(!t||!t.vertex||!t.fragment)throw"must specify 'vertex' and 'fragment' source";var e=t.vertex.trim(),r=t.fragment.trim(),a=t.gl;if(!a&&!(a=n()))throw new Error("WebGL not supported -- try another browser");return function(t,e,r,n,a){var s="",u=i(t,t.VERTEX_SHADER,e,a),h=i(t,t.FRAGMENT_SHADER,r,a),f=u.shader,c=h.shader;s+=u.log+"\n"+h.log;var l=t.createProgram();if(t.attachShader(l,f),t.attachShader(l,c),n)for(var p in n)n.hasOwnProperty(p)&&t.bindAttribLocation(l,Math.floor(n[p]),p);if(t.linkProgram(l),s+=t.getProgramInfoLog(l)||"",!t.getProgramParameter(l,t.LINK_STATUS))throw a&&(console.error("Shader error:\n"+s),console.error("Problematic shaders:\nVERTEX_SHADER:\n"+o(e)+"\n\nFRAGMENT_SHADER:\n"+o(r))),t.detachShader(l,f),t.detachShader(l,c),t.deleteShader(f),t.deleteShader(c),new Error("Error linking the shader program:\n"+s);return{program:l,vertex:f,fragment:c,log:s.trim()}}(a,e,r,t.attributeLocations,t.verbose)}},514:function(t){t.exports=function(t){var e=(t=t||{}).canvas||document.createElement("canvas");"number"===typeof t.width&&(e.width=t.width),"number"===typeof t.height&&(e.height=t.height);var r=t.attributes||t.attribs||{};try{gl=e.getContext("webgl",r)||e.getContext("experimental-webgl",r)}catch(n){gl=null}return gl}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){"use strict";function t(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(h){return void r(h)}s.done?e(u):Promise.resolve(u).then(n,i)}function e(e){return function(){var r=this,n=arguments;return new Promise((function(i,o){var a=e.apply(r,n);function s(e){t(a,i,o,s,u,"next",e)}function u(e){t(a,i,o,s,u,"throw",e)}s(void 0)}))}}var n=r(757),i=r.n(n),o=r(141),a=r.n(o)(),s=function(t){var e,r=Date.now(),n=0,i=!0,o=0,a=0;return function s(){if(i){var u=Date.now()-r;r=Date.now(),o++,(a+=u)>=1e3&&(n=o,o=0,a-=1e3),e=requestAnimationFrame(s),t(u/1e3)}}(),{isRunning:function(){return i},start:function(){i||(i=!0,loop())},stop:function(){e&&cancelAnimationFrame(e),i=!1},getFps:function(){return n}}};function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var c=r(41),l=function(){function t(e){var r=this;u(this,t),this.canvas=e,this.lastX=0,this.lastY=0,this.touched=!1;var n=this.emitter=new c.EventEmitter;this.mouseDownHandler=function(t){r.touched=!0,r.handleMove(t),n.emit("touchStart",r.getX(),r.getY())},this.mouseUpHandler=function(t){r.touched=!1,n.emit("touchEnd",r.getX(),r.getY())},this.mouseMoveHandler=function(t){r.handleMove(t),n.emit("touchMove",r.getX(),r.getY())},this.touchStartHandler=function(t){t.preventDefault();var e=t.touches[0];r.canvas.dispatchEvent(new MouseEvent("mousedown",{clientX:e.clientX,clientY:e.clientY}))},this.touchEndHandler=function(t){t.preventDefault(),r.canvas.dispatchEvent(new MouseEvent("mouseup"))},this.touchMoveHandler=function(t){t.preventDefault();var e=t.touches[0];r.canvas.dispatchEvent(new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY}))},this.canvas.addEventListener("mousedown",this.mouseDownHandler,!1),this.canvas.addEventListener("mouseup",this.mouseUpHandler,!1),this.canvas.addEventListener("mousemove",this.mouseMoveHandler,!1),this.canvas.addEventListener("touchstart",this.touchStartHandler,!1),this.canvas.addEventListener("touchend",this.touchEndHandler,!1),this.canvas.addEventListener("touchmove",this.touchMoveHandler,!1)}return f(t,[{key:"cleanup",value:function(){this.canvas.removeEventListener("mousedown",this.mouseDownHandler),this.canvas.removeEventListener("mouseup",this.mouseUpHandler),this.canvas.removeEventListener("mousemove",this.mouseMoveHandler),this.canvas.removeEventListener("touchstart",this.touchStartHandler),this.canvas.removeEventListener("touchend",this.touchEndHandler),this.canvas.removeEventListener("touchmove",this.touchMoveHandler)}},{key:"addEventListener",value:function(t,e){this.emitter.addListener(t,e)}},{key:"handleMove",value:function(t){var e=this.canvas.getBoundingClientRect(),r=t.clientX-e.left,n=t.clientY-e.top;this.lastX=r,this.lastY=n}},{key:"getX",value:function(){return this.lastX}},{key:"getY",value:function(){return this.lastY}},{key:"isTouched",value:function(){return this.touched}}]),t}();function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var v=new Int8Array(4),y=new Int32Array(v.buffer,0,1),m=new Float32Array(v.buffer,0,1),b=function(){};function w(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}b.intBitsToFloat=function(t){return y[0]=t,m[0]},b.floatToIntBits=function(t){return m[0]=t,y[0]},b.intToFloatColor=function(t){return b.intBitsToFloat(4278190079&t)},b.colorToFloat=function(t,e,r,n){return b.intToFloatColor(n<<24|r<<16|e<<8|t)},b.isPowerOfTwo=function(t){return 0===(t&t-1)},b.nextPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1};var _=b.isPowerOfTwo,x=function(){function t(e,r){u(this,t),this.gl=e,this.managedArgs=r,this.id=null,this.target=e.TEXTURE_2D,this.width=0,this.height=0,this.__shape=[0,0],this.wrapS=t.DEFAULT_WRAP,this.wrapT=t.DEFAULT_WRAP,this.minFilter=t.DEFAULT_FILTER,this.magFilter=t.DEFAULT_FILTER,Object.defineProperty(this,"shape",{get:function(){return this.__shape[0]=this.width,this.__shape[1]=this.height,this.__shape},set:function(t){}}),this.create()}return f(t,[{key:"setup",value:function(e){var r=this.gl;if(e)if(e.src&&"string"===typeof e.src){var n=new Image,i=e.src,o=e.crossOrigin,a="function"===typeof e.onLoad?e.onLoad:null,s="function"===typeof e.onError?e.onError:null,u=e.genMipmaps,h=this;t.USE_DUMMY_1x1_DATA&&(h.uploadData(1,1),this.width=this.height=0),n.crossOrigin=o,n.onload=function(t){h.uploadImage(n,void 0,void 0,u),"function"===typeof a&&a.call(h,t,h)},n.onerror=function(t){u&&r.generateMipmap(r.TEXTURE_2D),"function"===typeof s&&s.call(h,t,h)},n.onabort=function(t){u&&r.generateMipmap(r.TEXTURE_2D),"function"===typeof s&&s.call(h,t,h)},n.src=i}else e.image?this.uploadImage(e.image,e.format,e.dataType,e.genMipmaps):this.uploadData(e.width,e.height,e.format,e.dataType,e.data,e.genMipmaps)}},{key:"create",value:function(){var e=this.gl;this.id=e.createTexture(),this.width=this.height=0,this.target=e.TEXTURE_2D,this.bind(),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.UNPACK_PREMULTIPLY_ALPHA),e.pixelStorei(e.UNPACK_ALIGNMENT,t.UNPACK_ALIGNMENT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.UNPACK_FLIP_Y);var r=t.UNPACK_COLORSPACE_CONVERSION||e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,r),this.setWrap(this.wrapS,this.wrapT,!1),this.setFilter(this.minFilter,this.magFilter,!1),this.managedArgs&&this.setup(this.managedArgs)}},{key:"destroy",value:function(){this.id&&this.gl&&this.gl.deleteTexture(this.id),this.context&&this.context.removeManagedObject(this),this.width=this.height=0,this.id=null,this.managedArgs=null,this.context=null,this.gl=null}},{key:"setWrap",value:function(t,e,r){t&&e?(this.wrapS=t,this.wrapT=e):this.wrapS=this.wrapT=t,this._checkPOT(),r||this.bind();var n=this.gl;n.texParameteri(this.target,n.TEXTURE_WRAP_S,this.wrapS),n.texParameteri(this.target,n.TEXTURE_WRAP_T,this.wrapT)}},{key:"setFilter",value:function(t,e,r){t&&e?(this.minFilter=t,this.magFilter=e):this.minFilter=this.magFilter=t,this._checkPOT(),r||this.bind();var n=this.gl;n.texParameteri(this.target,n.TEXTURE_MIN_FILTER,this.minFilter),n.texParameteri(this.target,n.TEXTURE_MAG_FILTER,this.magFilter)}},{key:"uploadData",value:function(t,e,r,n,i,o){var a=this.gl;r=r||a.RGBA,n=n||a.UNSIGNED_BYTE,i=i||null,this.width=t||0==t?t:this.width,this.height=e||0==e?e:this.height,this._checkPOT(),this.bind(),a.texImage2D(this.target,0,r,this.width,this.height,0,r,n,i),o&&a.generateMipmap(this.target)}},{key:"uploadImage",value:function(t,e,r,n){var i=this.gl;e=e||i.RGBA,r=r||i.UNSIGNED_BYTE,this.width=t.width,this.height=t.height,this._checkPOT(),this.bind(),i.texImage2D(this.target,0,e,e,r,t),n&&i.generateMipmap(this.target)}},{key:"_checkPOT",value:function(){if(!t.FORCE_POT){var e=this.minFilter!==t.Filter.LINEAR&&this.minFilter!==t.Filter.NEAREST,r=this.wrapS!==t.Wrap.CLAMP_TO_EDGE||this.wrapT!==t.Wrap.CLAMP_TO_EDGE;if((e||r)&&(!_(this.width)||!_(this.height)))throw new Error(e?"Non-power-of-two textures cannot use mipmapping as filter":"Non-power-of-two textures must use CLAMP_TO_EDGE as wrap")}}},{key:"bind",value:function(t){var e=this.gl;(t||0===t)&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(this.target,this.id)}},{key:"toString",value:function(){return this.id+":"+this.width+"x"+this.height}}]),t}();w(x,"Filter",{NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985}),w(x,"Wrap",{CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497}),w(x,"Format",{DEPTH_COMPONENT:6402,ALPHA:6406,RGBA:6408,RGB:6407,LUMINANCE:6409,LUMINANCE_ALPHA:6410}),w(x,"DataType",{BYTE:5120,SHORT:5122,INT:5124,FLOAT:5126,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635}),w(x,"DEFAULT_WRAP",x.Wrap.CLAMP_TO_EDGE),w(x,"DEFAULT_FILTER",x.Filter.NEAREST),w(x,"FORCE_POT",!1),w(x,"UNPACK_FLIP_Y",!1),w(x,"UNPACK_ALIGNMENT",1),w(x,"UNPACK_PREMULTIPLY_ALPHA",!0),w(x,"UNPACK_COLORSPACE_CONVERSION",void 0),w(x,"getNumComponents",(function(t){switch(t){case x.Format.DEPTH_COMPONENT:case x.Format.ALPHA:case x.Format.LUMINANCE:return 1;case x.Format.LUMINANCE_ALPHA:return 2;case x.Format.RGB:return 3;case x.Format.RGBA:return 4}return null}));var E=function(t,e,r){return new Promise((function(n){var i=new Image;i.src=e,i.onload=function(){var e=new x(t,g(g({},r),{},{image:i}));e.setFilter(x.Filter.LINEAR,x.Filter.LINEAR,!1),n(e)}}))};x.Filter;var T=function(){function t(e,r){u(this,t),this.x=e,this.y=r}return f(t,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setVector",value:function(t){return this.set(t.x,t.y)}},{key:"add",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"addVector",value:function(t){return this.add(t.x,t.y)}},{key:"sub",value:function(t,e){return this.add(-t,-e)}},{key:"subVector",value:function(t){return this.sub(t.x,t.y)}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"distanceSqr",value:function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSqr(t))}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"len2",value:function(){return this.x*this.x+this.y*this.y}},{key:"len",value:function(){return Math.sqrt(this.len2())}},{key:"nor",value:function(){var t=this.len();return 0!==t&&(this.x/=t,this.y/=t),this}},{key:"rotateRad",value:function(t){var e=Math.cos(t),r=Math.sin(t),n=this.x*e-this.y*r,i=this.x*r+this.y*e;return this.x=n,this.y=i,this}},{key:"rotate",value:function(t){return this.rotateRad(t*Math.PI/180)}},{key:"cpy",value:function(){return new t(this.x,this.y)}}]),t}(),A=new T(0,0),I=new T(0,0),M=function(t,e,r,n,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1;A.set(r,n),I.set(i,o);var c=A.distance(I),l=I.subVector(A).angle();t.setColor(s,u,h,f),t.draw(e,r,n,.5*a,c,0,0,l-Math.PI/2),t.setColor(1,1,1,1)},R=(new T(0,0),function(){function t(e,r,n,i,o,a,s,h,f){u(this,t),s&&h||(s=1/e.width,h=1/e.height);var c=r*s,l=n*h,p=(r+i)*s,d=(n+o)*h;for(var g in this.texture=e,this.x=r,this.y=n,this.width=i,this.height=o,f?(this.u=p,this.v=l,this.u2=c,this.v2=d):(this.u=c,this.v=l,this.u2=p,this.v2=d),a)this[g]=a[g]}return f(t,[{key:"draw",value:function(t,e,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,f=this.originalWidth,c=this.offsetX,l=this.offsetY,p=n/f,d=this.width*p,g=this.height*p,v=e+c*p,y=r+i-l*p-g;o-=v-e,a-=y-r,t.draw(this.texture,v,y,d,g,o,a,s,u,h,this.u,this.v,this.u2,this.v2)}}],[{key:"splitTexture",value:function(e,r,n){for(var i=e.width/r,o=e.height/n,a=[],s=0;s<r;s++)for(var u=0;u<n;u++)a.push(new t(e,s*i,u*o,i,o,{}));return a}}]),t}());function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function O(t,e){if(t){if("string"===typeof t)return L(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(t,e):void 0}}function S(t,e){var r="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=O(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function U(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(t,e)||O(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=1e-6,B="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function D(){var t=new B(16);return B!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function P(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],f=e[8],c=e[9],l=e[10],p=e[11],d=e[12],g=e[13],v=e[14],y=e[15],m=r*s-n*a,b=r*u-i*a,w=r*h-o*a,_=n*u-i*s,x=n*h-o*s,E=i*h-o*u,T=f*g-c*d,A=f*v-l*d,I=f*y-p*d,M=c*v-l*g,R=c*y-p*g,L=l*y-p*v,O=m*L-b*R+w*M+_*I-x*A+E*T;return O?(O=1/O,t[0]=(s*L-u*R+h*M)*O,t[1]=(i*R-n*L-o*M)*O,t[2]=(g*E-v*x+y*_)*O,t[3]=(l*x-c*E-p*_)*O,t[4]=(u*I-a*L-h*A)*O,t[5]=(r*L-i*I+o*A)*O,t[6]=(v*w-d*E-y*b)*O,t[7]=(f*E-l*w+p*b)*O,t[8]=(a*R-s*I+h*T)*O,t[9]=(n*I-r*R-o*T)*O,t[10]=(d*x-g*w+y*m)*O,t[11]=(c*w-f*x-p*m)*O,t[12]=(s*A-a*M-u*T)*O,t[13]=(r*M-n*A+i*T)*O,t[14]=(g*b-d*_-v*m)*O,t[15]=(f*_-c*b+l*m)*O,t):null}function j(t,e,r){var n,i,o,a,s,u,h,f,c,l,p,d,g=r[0],v=r[1],y=r[2];return e===t?(t[12]=e[0]*g+e[4]*v+e[8]*y+e[12],t[13]=e[1]*g+e[5]*v+e[9]*y+e[13],t[14]=e[2]*g+e[6]*v+e[10]*y+e[14],t[15]=e[3]*g+e[7]*v+e[11]*y+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],f=e[7],c=e[8],l=e[9],p=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h,t[7]=f,t[8]=c,t[9]=l,t[10]=p,t[11]=d,t[12]=n*g+s*v+c*y+e[12],t[13]=i*g+u*v+l*y+e[13],t[14]=o*g+h*v+p*y+e[14],t[15]=a*g+f*v+d*y+e[15]),t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var k=function(t,e,r,n,i,o,a){var s=1/(e-r),u=1/(n-i),h=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(a+o)*h,t[15]=1,t};var F=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],f=e[7],c=e[8],l=e[9],p=e[10],d=e[11],g=e[12],v=e[13],y=e[14],m=e[15],b=r[0],w=r[1],_=r[2],x=r[3];return t[0]=b*n+w*s+_*c+x*g,t[1]=b*i+w*u+_*l+x*v,t[2]=b*o+w*h+_*p+x*y,t[3]=b*a+w*f+_*d+x*m,b=r[4],w=r[5],_=r[6],x=r[7],t[4]=b*n+w*s+_*c+x*g,t[5]=b*i+w*u+_*l+x*v,t[6]=b*o+w*h+_*p+x*y,t[7]=b*a+w*f+_*d+x*m,b=r[8],w=r[9],_=r[10],x=r[11],t[8]=b*n+w*s+_*c+x*g,t[9]=b*i+w*u+_*l+x*v,t[10]=b*o+w*h+_*p+x*y,t[11]=b*a+w*f+_*d+x*m,b=r[12],w=r[13],_=r[14],x=r[15],t[12]=b*n+w*s+_*c+x*g,t[13]=b*i+w*u+_*l+x*v,t[14]=b*o+w*h+_*p+x*y,t[15]=b*a+w*f+_*d+x*m,t},V=function(t,e,r,n,i,o,a){var s=U(e,3),u=s[0],h=s[1],f=s[2];return u-=n,h=a-h-1,h-=i,t[0]=2*u/o-1,t[1]=2*h/a-1,t[2]=2*f-1,function(t,e,r){var n=U(e,3),i=n[0],o=n[1],a=n[2],s=r,u=s[0],h=s[1],f=s[2],c=s[3],l=s[4],p=s[5],d=s[6],g=s[7],v=s[8],y=s[9],m=s[10],b=s[11],w=s[12],_=s[13],x=s[14],E=1/(i*c+o*g+a*b+s[15]);return t[0]=(i*u+o*l+a*v+w)*E,t[1]=(i*h+o*p+a*y+_)*E,t[2]=(i*f+o*d+a*m+x)*E,t}(t,t,r)},H=function(t,e,r,n){var i=D(),o=D(),a=D(),s=D(),u=D(),h=new T(0,0),f=[0,0,0],c=[0,0,1],l=[0,0,0],p=[0,1,0],d=function(){k(i,0,t,e,0,0,1);var r=h.x,n=h.y;c[0]=l[0]=r,c[1]=l[1]=n,P(o),function(t,e,r,n){var i,o,a,s,u,h,f,c,l,p,d=e[0],g=e[1],v=e[2],y=n[0],m=n[1],b=n[2],w=r[0],_=r[1],x=r[2];Math.abs(d-w)<C&&Math.abs(g-_)<C&&Math.abs(v-x)<C?P(t):(f=d-w,c=g-_,l=v-x,i=m*(l*=p=1/Math.hypot(f,c,l))-b*(c*=p),o=b*(f*=p)-y*l,a=y*c-m*f,(p=Math.hypot(i,o,a))?(i*=p=1/p,o*=p,a*=p):(i=0,o=0,a=0),s=c*a-l*o,u=l*i-f*a,h=f*o-c*i,(p=Math.hypot(s,u,h))?(s*=p=1/p,u*=p,h*=p):(s=0,u=0,h=0),t[0]=i,t[1]=s,t[2]=f,t[3]=0,t[4]=o,t[5]=u,t[6]=c,t[7]=0,t[8]=a,t[9]=h,t[10]=l,t[11]=0,t[12]=-(i*d+o*g+a*v),t[13]=-(s*d+u*g+h*v),t[14]=-(f*d+c*g+l*v),t[15]=1)}(u,c,l,p),F(o,o,u),F(o,o,s),F(i,i,o),N(a,i)};return d(),{combined:i,getPosition:function(){return h},zoomTo:function(t,e,r){j(s,s,[t,e,0]),function(t,e,r){var n=r[0],i=r[1],o=r[2];t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(s,s,[r,r,1]),j(s,s,[-t,-e,0]),d()},setMatrix:function(t){var e,r;r=t,(e=i)[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],N(a,i)},setYUp:function(t){p[1]=t?-1:1,d()},setPosition:function(t,e){h.set(t,e),d()},unprojectVector2:function(t,e){f[0]=e.x,f[1]=e.y,f[2]=0,V(f,f,a,0,0,r,n),t.set(f[0],f[1])},resize:function(i,o,a,s){t=i,e=o,a&&(r=a),s&&(n=s),d()}}},W=function(t,e){var r=e||window.devicePixelRatio||1,n=t.clientWidth*r,i=t.clientHeight*r;return t.width===n&&t.height===i||(t.width=n,t.height=i),[n,i]},G={autoUpdate:!0,pixelRatio:void 0,crop:!0},X=function(t,e,r,n){var i;(n=g(g({},G),n)).disablePremultipliedAlpha&&(i={premultipliedAlpha:!1}),i=g(g({},i),n.contextOption);var o,a=t.getContext("webgl",i),s=[],u=n,h=u.autoUpdate,f=u.pixelRatio,c=u.crop,l={pixelRatio:f=f||window.devicePixelRatio||1,x:0,y:0,width:e,height:r,worldWidth:e,worldHeight:r},p=U(W(t,f),2),d=p[0],v=p[1],y=H(e,r,d,v);h&&(o=function(t){m.update()},window.addEventListener("resize",o));var m={getViewportInfo:function(){return l},getCamera:function(){return y},addCamera:function(t){s.push(t)},getContext:function(){return a},getCanvas:function(){return t},update:function(){var n=U(W(t,f),2),i=n[0],o=n[1],u=e/r,h=i/o;if(c){var p,d;u<h?(d=o,p=o*u):(p=i,d=i/u);var g=(i-p)/2,v=(o-d)/2;l.x=g,l.y=v,l.width=p,l.height=d,a.viewport(g,v,p,d),y.resize(e,r,p,d);var m,b=S(s);try{for(b.s();!(m=b.n()).done;){m.value.resize(e,r,p,d)}}catch(M){b.e(M)}finally{b.f()}}else{var w,_,x,E;l.x=0,l.y=0,l.width=i,l.height=o,a.viewport(0,0,i,o),u<h?(x=-((w=(_=r)*h)-e)/2,E=0):(x=0,E=-((_=(w=e)/h)-r)/2),y.resize(w,_,i,o),y.setPosition(x,E);var T,A=S(s);try{for(A.s();!(T=A.n()).done;){var I=T.value;I.resize(w,_,i,o),I.setPosition(x,E)}}catch(M){A.e(M)}finally{A.f()}}},cleanUp:function(){o&&window.removeEventListener("resize",o)}};return h&&m.update(),m},Y=function(t,e){var r=new l(t),n=new T,i=new T;return{isTouched:function(){return r.isTouched()},cleanup:function(){r.cleanup()},addEventListener:function(t,n){r.addEventListener(t,function(t,e){return function(r,n,i){var o=e.getViewportInfo(),a=o.x,s=o.y,u=o.pixelRatio;t(r=r*u-a,n=n*u-s,i)}}(n,e))},getX:function(){var t=e.getViewportInfo(),n=t.x,i=t.pixelRatio;return r.getX()*i-n},getY:function(){var t=e.getViewportInfo(),n=t.y,i=t.pixelRatio;return r.getY()*i-n},getTouchedWorldCoord:function(t){return t||(t=e.getCamera()),n.set(this.getX(),this.getY()),t.unprojectVector2(i,n),i}}},q=function(){function t(){u(this,t)}return f(t,[{key:"setScreen",value:function(e){this.currentScreen&&this.currentScreen.dispose&&this.currentScreen.dispose(),this.currentScreen=e,this.currentScreen&&this.currentScreen.init&&this.currentScreen.init(t)}},{key:"update",value:function(t,e){this.currentScreen&&this.currentScreen.update&&this.currentScreen.update(t,e,this)}}]),t}(),z=r(317),K=r.n(z),Z={hidden:!1,info:!0},Q=function(t){t=g(g({},Z),t);var e=document.createElement("div");e.style="position:fixed;top:0;left:0;right:0;bottom:0;",t.wrapperClassName&&(e.className=t.wrapperClassName),t.hidden&&(e.style.display="none");var r=document.createElement("canvas");r.style="width:100%;height:100%;";var n=document.createElement("div");return n.style="position:absolute;top:1em;left:1em;color:white",t.info||(n.style.display="none"),e.appendChild(r),e.appendChild(n),document.body.appendChild(e),{getCanvas:function(){return r},getInfo:function(){return n},show:function(){return e.style.display="block"},hide:function(){return e.style.display="none"},cleanup:function(){return document.body.removeChild(e)}}};function $(t){return function(t){if(Array.isArray(t))return L(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||O(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var J=function(t,e,r){var n,i=0,o=S(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.first===t&&a.second===e){i=a.amount;break}}}catch(s){o.e(s)}finally{o.f()}return i},tt=function(){function t(e,r,n,i){u(this,t),this.pageImage=e,this.regions=r,this.kerningsData=n,this.align=2,this.lineHeight=e.lineHeight,this.baseLine=e.base,this.fixedWidth=i,this.position=new T(0,0),this.scale=0,this.newBase=0,this.oriWidth=0,this.oriHeight=0,this.positionBreak=[],this.lastBreakIndex=0,this.cache=[],this.preDraw=!0,this.preSequence="",this.x=0,this.y=0,this.rgba=[1,1,1,1]}return f(t,[{key:"setColor",value:function(t,e,r,n){this.rgba[0]=t,this.rgba[1]=e,this.rgba[2]=r,this.rgba[3]=n}},{key:"addToCache",value:function(t,e,r,n,i){for(var o=0,a=0;a<t.length;a++){var s=t.charCodeAt(a),u=t.charCodeAt(a-1),h=this.findRegions(s),f=J(u,s,this.kerningsData);this.cache.push({key:h,x:e+o+h.xoffset*this.scale+f*this.scale,y:r+h.yoffset*this.scale+n*this.scale+i,width:h.width*this.scale,height:h.height*this.scale}),o+=h.xadvance*this.scale}}},{key:"beforeDrawing",value:function(t,e,r,n){if(this.preDraw){for(var i=0,o=0,a=[],s=0;s<n.length;s++){var u=n.charCodeAt(s),h=this.findRegions(u);32!==u?o+=h.xadvance*this.scale:(i=h.xadvance*this.scale,a.push(o),o=0)}var f=Math.max.apply(Math,a)+i;this.newbase=r,this.scale=this.newbase/this.baseLine;for(var c=(n=n.trim()).split("/n").map((function(t){return t.trim()})),l=0,p=0;p<c.length;p++){n=c[p],this.oriWidth=0;for(var d=0;d<n.length;d++){var g=n.charCodeAt(d),v=n.charCodeAt(d-1),y=this.findRegions(g),m=J(v,g,this.kerningsData);this.oriWidth+=m*this.scale,this.oriWidth+=y.xadvance*this.scale}var b=this.oriWidth/this.fixedWidth;l=this.lineHeight*this.scale*p;var w=0,_="",x=0;if(b>1&&this.fixedWidth>f)for(var E=0;E<n.length;E++){_+=n[E];var T=n.charCodeAt(E);if((w+=this.findRegions(T).xadvance*this.scale)>=this.fixedWidth)for(var A=E;A>=0;){E--,A--;var I=this.findRegions(n.charCodeAt(E));if(w-=I.xadvance*this.scale,_=_.substring(0,_.length-1),w<=this.fixedWidth&&32===I.id){x=this.lineHeight*this.positionBreak.length,this.positionBreak.push(E),this.lastBreakIndex=E;for(var M=_.trim(),R=0,L=0,O=0;O<M.length;O++)L=this.findRegions(M.charCodeAt(O)),O===M.length-1?R+=L.width*this.scale:R+=L.xadvance*this.scale;var S=U(this.getPositionBasedOnMode(t,e,R),2),C=S[0],B=S[1];this.addToCache(M,C,B,x,l),w=0,A=-1,_=""}}if(E===n.length-1&&w<this.oriWidth){for(var D="",P=this.lastBreakIndex;P<=E;P++)D+=n[P];for(var N=D.trim(),j=0,k=0,F=0;F<N.length;F++)k=this.findRegions(N.charCodeAt(F)),F===N.length-1?j+=k.width*this.scale:j+=k.xadvance*this.scale;var V=U(this.getPositionBasedOnMode(t,e,j),2),H=V[0],W=V[1];x=this.lineHeight*this.positionBreak.length,this.addToCache(N,H,W,x,l)}}if(b<=1||this.fixedWidth<f){var G=U(this.getPositionBasedOnMode(t,e,this.oriWidth),2),X=G[0],Y=G[1];this.addToCache(n,X,Y,0,l)}}this.preDraw=!1,this.oriHeight=this.newbase}}},{key:"getPositionBasedOnMode",value:function(t,e,r){return 0===this.align?t=t+this.fixedWidth/2-r/2:1===this.align&&(t=t+this.fixedWidth-r),[t,e]}},{key:"getTextWidth",value:function(){return this.oriWidth}},{key:"setAlignMode",value:function(t){this.align=t}},{key:"setLineHeight",value:function(t){this.lineHeight=t}},{key:"setDisplayWidth",value:function(t){this.fixedWidth=t}},{key:"findRegions",value:function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].id===t)return this.regions[e]}},{key:"draw",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.baseLine;e===this.preSequence&&r===this.x&&n===this.y||(this.preDraw=!0,this.cache.length=0,this.positionBreak.length=0,this.beforeDrawing(r,n,i,e));var o=t.color;t.setColor.apply(t,$(this.rgba));for(var a=0;a<this.cache.length;a++){var s=this.cache[a];s.key.draw(t,s.x,s.y,s.width,s.height)}t.color=o,this.preSequence=e,this.x=r,this.y=n}}]),t}(),et=0;function rt(t,e){for(var r=t.split("/"),n=e.split("/"),i=[],o=0,a=r.length;o<a;o++)if(".."===r[o])i.pop();else{if("."===r[o])continue;i.push(r[o])}for(var s=0,u=n.length;s<u;s++)if(".."===n[s])i.pop();else{if("."===n[s])continue;i.push(n[s])}return i.join("/")}var nt=function(){var t=e(i().mark((function t(e,r,n){var o,a,s,u,h,f,c,l,p,d,g,v,y,m,b,w,_,x,T,A,I,M,L,O,S,U,C,B,D,P,N,j,k,F,V,H,W,G,X,Y,q,z,K,Z,Q,$,J,et,nt,it,ot,at,st,ut,ht,ft,ct,lt,pt,dt,gt,vt,yt,mt,bt,wt,_t,xt,Et,Tt,At,It,Mt,Rt,Lt;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(r).then((function(t){return t.text()}));case 2:o=t.sent,a=[],s=[],u=[],h=null,f=o.split("\n").map((function(t){return t.trim()})),c=0,p=[],d=!1,g=0,v=2;case 13:if(y=f[v],p.length=0,"page"!==(l=y.split(" ").map((function(t){return t.trim()})))[0]){t.next=21;break}g+=1,t.next=22;break;case 21:return t.abrupt("break",25);case 22:v+=1,t.next=13;break;case 25:m=-1,b=2+g+1;case 27:if(void 0!==(w=f[c])){t.next=32;break}return d=!1,t.abrupt("break",39);case 32:if(2===w.split(" ").length&&("kernings"===w.split(" ")[0]&&(d=!0),c++,w=f[c]),d&&null!==h){for(l=(l=w.split(" ").map((function(t){return t.trim()}))).filter((function(t){return""!==t})),p.length=0,_=1;_<l.length;_++)p.push(l[_].split("=")[1]);x=parseInt(p[0],10),T=parseInt(p[1],10),A=parseInt(p[2],10),u.push({first:x,second:T,amount:A})}if(null===h){for(m+=1,p.length=0,l=w.split(" ").map((function(t){return t.trim()})),I=1;I<l.length;I++)p.push(l[I].split("=")[1]);for(M=p[0],L=parseInt(p[1],10),O=0!==parseInt(p[2],10),S=0!==parseInt(p[3],10),U=p[4],C=parseInt(p[5],10),B=parseInt(p[6],10),D=parseInt(p[7],10),P=parseInt(p[8],10),N=p[9].split(",").map((function(t){return parseInt(t,10)})),j=p[10].split(",").map((function(t){return parseInt(t,10)})),k=parseInt(p[11],10),c++,w=f[c],p.length=0,l=w.split(" ").map((function(t){return t.trim()})),F=1;F<l.length;F++)p.push(l[F].split("=")[1]);for(V=parseInt(p[0],10),H=parseInt(p[1],10),W=parseInt(p[2],10),G=parseInt(p[3],10),X=parseInt(p[4],10),Y=parseInt(p[5],10),q=parseInt(p[6],10),z=parseInt(p[7],10),K=parseInt(p[8],10),Z=parseInt(p[9],10),w=f[c=c+m+1],p.length=0,l=w.split(" ").map((function(t){return t.trim()})),Q=1;Q<l.length;Q++)p.push(l[Q].split("=")[1]);$=parseInt(p[0],10),J=p[1].split('"'),et=rt(r,"../".concat(J[1])),h={file:et,page_id:$,face:M,size:L,bold:O,italic:S,charset:U,unicode:C,stretchH:B,smooth:D,aa:P,padding:N,spacing:j,outline:k,lineHeight:V,base:H,scaleW:W,scaleH:G,num_of_pages:X,packed:Y,alphaChnl:q,redChnl:z,greenChnl:K,blueChnl:Z},a.push(h),w=f[c=b]}if(!d&&null!==h){for(l=(l=w.split(" ").map((function(t){return t.trim()}))).filter((function(t){return""!==t})),p.length=0,nt=1;nt<l.length;nt++)p.push(l[nt].split("=")[1]);it=parseInt(p[0],10),ot=parseInt(p[1],10),at=parseInt(p[2],10),st=parseInt(p[3],10),ut=parseInt(p[4],10),ht=parseInt(p[5],10),ft=parseInt(p[6],10),ct=parseInt(p[7],10),lt=parseInt(p[8],10),(pt={id:it,left:ot,top:at,width:st,height:ut,xoffset:ht,yoffset:ft,xadvance:ct,page:h,id_page:lt}).id_page===m?s.push(pt):m===g-1?d=!0:(b=c,c=-1,h=null)}c++,t.next=27;break;case 39:dt=0,gt=a;case 40:if(!(dt<gt.length)){t.next=50;break}return vt=gt[dt],t.next=44,E(e,vt.file,n);case 44:vt.texture=t.sent,vt.invTextWidth=1/vt.texture.width,vt.invTextHeight=1/vt.texture.height;case 47:dt++,t.next=40;break;case 50:for(yt=[],mt=0,bt=s;mt<bt.length;mt++)wt=bt[mt],_t=wt.left,xt=wt.top,Et=wt.width,Tt=wt.height,At=wt.page,It=At.texture,Mt=At.invTexWidth,Rt=At.invTexHeight,(Lt=new R(It,_t,xt,Et,Tt,wt,Mt,Rt)).originalWidth=Et,Lt.originalHeight=Tt,Lt.offsetX=0,Lt.offsetY=0,yt.push(Lt);return t.abrupt("return",{getLineHeight:function(){return h.lineHeight},getPages:function(){return a},getRegions:function(){return yt},createRenderer:function(t){return new tt(h,yt,u,t)}});case 53:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),it=function(t,e,r,n,i){return t.x>e&&t.x<e+n&&t.y>r&&t.y<r+i},ot=f((function t(){u(this,t)}));ot.WORLD_WIDTH=600,ot.WORLD_HEIGHT=1e3,ot.BOARD_WIDTH=550,ot.BOARD_HEIGHT=800,ot.CELL_RATIO=1.5;var at=new c.EventEmitter,st=[],ut=function(t,e){if(t.length!==e.length)return!1;st.length=0;var r,n=S(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;st.push(i)}}catch(h){n.e(h)}finally{n.f()}var o,a=S(e);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=st.indexOf(s);if(-1===u)return!1;st.splice(u,1)}}catch(h){a.e(h)}finally{a.f()}return!0},ht=function(){function t(){u(this,t),this.formulas=[];var e,r=S("beef * 1 + chop * 1.5 = groundedBeef\nbeef + stove * 2 = searedBeef\ngroundedBeef + stove * 2 = meatball\npotato + chop * 1.5 = slicedPotato\npotato + stove * 2 = bakedPotato\nslicedPotato + stove * 2 = potatoChip\nbakedPotato + chop * 1.5 = mashedPotato".replaceAll(" ","").split("\n"));try{for(r.s();!(e=r.n()).done;){var n=e.value.split("=");if(!(n.length<2)){var i=n[0].split("+");if(!(i.length<2)){var o=i[0].split("*"),a=o[0],s=o.length>1?parseInt(o[1]):1,h=i[1].split("*");if(!(h.length<2)){var f=h[0],c=parseFloat(h[1]),l=n[1].split("+");this.formulas.push({itemCode:a,itemAmount:s,outputItemCodes:l,requireTime:c,toolCode:f})}}}}}catch(p){r.e(p)}finally{r.f()}}return f(t,[{key:"search",value:function(t,e){return this.formulas.find((function(r){return r.toolCode===e&&r.itemCode===t}))}}]),t}(),ft=function(){function t(){u(this,t),this.itemFormulas=[];var e,r=S("searedBeef + mashedPotato = steak\nlettuce + mashedPotato = salad\npotato + beef = curry".replaceAll(" ","").split("\n"));try{for(r.s();!(e=r.n()).done;){var n=e.value.split("=");if(!(n.length<2)){var i=n[1],o=n[0].split("+");o.length<2||this.itemFormulas.push({itemCodes:o,outputItemCode:i})}}}catch(a){r.e(a)}finally{r.f()}}return f(t,[{key:"search",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=S(this.itemFormulas);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(ut(e,o.itemCodes))return o}}catch(a){i.e(a)}finally{i.f()}return null}},{key:"searchAvailableFormula",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=S(this.itemFormulas);try{var o=function(){var t=n.value;if(e.every((function(e){return t.itemCodes.includes(e)})))return{v:!0}};for(i.s();!(n=i.n()).done;){var a=o();if("object"===typeof a)return a.v}}catch(s){i.e(s)}finally{i.f()}return!1}}]),t}(),ct=new ht,lt=new ft,pt=["chop","stove"],dt=["beef","lettuce","potato"],gt=["red","green","yellow","blue"],vt={orders:[],inventorySlotAmount:0,tools:[],plateSlotAmount:0},yt=[{itemCode:"potato",price:[2],currency:["yellow"]},{itemCode:"beef",price:[2],currency:["red"]},{itemCode:"lettuce",price:[2],currency:["green"]}],mt=function(){function t(){var r=this;u(this,t),this.tools=[],this.screen="Title",this.cells=[],this.random=void 0,this.isProcessing=!1,this.isPause=!1,this.inventories=[],this.plates=[],this.currentOrders=[],this.totalTime=0,this.currencies=[{code:"red",amount:0},{code:"green",amount:0},{code:"yellow",amount:0},{code:"blue",amount:0}],this.mapData={orders:[],inventorySlotAmount:0,tools:[],plateSlotAmount:0},this.getCell=function(t,e){return r.cells[5*e+t]},this.getCol=function(t){var e=[];e.length=0;for(var n=0;n<5;n++)e.push(r.getCell(t,n));return e},this.setRandomGem=function(t,e){r.setState(t,e,r.getRandomGem())},this.shuffleBoard=function(){for(var t=r.cells.length-1;t>0;t--){var e=r.randomInt(0,t),n=[r.cells[e],r.cells[t]];r.cells[t]=n[0],r.cells[e]=n[1]}},this.setState=function(t,e,n){var i=r.getCell(t,e);r.setCellState(i,n)},this.setCellState=function(t,e){t.color=e.color},this.setMapData=function(t){r.mapData=t,r.currentOrders=t.orders;for(var e=0;e<r.mapData.plateSlotAmount;e++)r.plates.push([])},this.fill=e(i().mark((function t(){var e,n,o,a,s,u,h,f,c,l,p,d;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=0;case 2:if(!(n<5)){t.next=21;break}for(e.length=0,o=0;o<5;o++)e[o]=0;for(a=r.getCol(n),s=0,u=a.length-1;u>=0;u--)if(a[u].color<0)for(s++,h=u-1;h>=0;h--)e[h]++;f=a.length-1;case 9:if(!(f>=0)){t.next=17;break}if(!(a[f].color<0)){t.next=12;break}return t.abrupt("continue",14);case 12:(c=e[f])>0&&(l=f+c,p=r.getCell(n,f),r.setState(n,l,p),r.setState(n,f,{color:-1}));case 14:f--,t.next=9;break;case 17:for(d=0;d<s;d++)r.setRandomGem(n,d);case 18:n++,t.next=2;break;case 21:case"end":return t.stop()}}),t)}))),this.isValidPath=function(t,e){if(e.length<3)return!1;for(var n,i=0;i<e.length;i++){var o=e[i];if(o.x<0||o.x>=5||o.y<0||o.y>=5)return!1;if(n){if(t.getCell(n.x,n.y).color!==t.getCell(o.x,o.y).color)return!1;if(!r.areAdjacentCells(o,n))return!1}else n=new T(0,0);n.set(o.x,o.y)}return!0},this.areAdjacentCells=function(t,e){for(var r=-1;r<2;r++)for(var n=-1;n<2;n++){var i=t.x+n,o=t.y+r;if(!(i<0||i>4||o<0||o>4||i!==e.x||o!==e.y))return!0}return!1},this.tools=pt.map((function(t){return{itemCode:"",code:t,remainingActiveTime:0}})),this.plates=[],this.inventories=[],this.initBoard()}return f(t,[{key:"pauseGame",value:function(){this.isPause=!0}},{key:"initBoard",value:function(){for(var t=0;t<5;t++)for(var e=0;e<5;e++)this.cells[5*e+t]=this.getRandomGem()}},{key:"randomInt",value:function(t,e){return t+Math.floor(Math.random()*(e-t))}},{key:"getRandomGem",value:function(){return{color:this.randomInt(0,4)}}},{key:"earn",value:function(t,e){this.currencies=this.currencies.map((function(r){return r.code===t?g(g({},r),{},{amount:r.amount+e}):r}))}},{key:"buy",value:function(t){var e=this,r=yt.find((function(e){return e.itemCode===t}));if(r){for(var n=[],i=function(t){var i=e.currencies.find((function(e){return e.code===r.currency[t]}));if(!i||i.amount<r.price[t])return{v:void 0};n.push(g(g({},i),{},{amount:i.amount-r.price[t]}))},o=0;o<r.currency.length;o++){var a=i(o);if("object"===typeof a)return a.v}n.length&&(this.currencies=this.currencies.map((function(t){return n.find((function(e){return e.code===t.code}))?n.find((function(e){return e.code===t.code})):t})),this.grant(t))}}},{key:"processPath",value:function(){var t=e(i().mark((function t(e){var r,n,o,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isProcessing&&this.isValidPath(this,e)){t.next=2;break}return t.abrupt("return",!1);case 2:this.isProcessing=!0,r=this.getCell(e[0].x,e[0].y),this.earn(gt[r.color],e.length),this.totalTime+=5,n=S(e);try{for(n.s();!(o=n.n()).done;)a=o.value,this.getCell(a.x,a.y).color=-1}catch(i){n.e(i)}finally{n.f()}return t.next=10,this.fill();case 10:this.isProcessing=!1;case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"reset",value:function(){this.inventories=[],this.tools=pt.map((function(t){return{itemCode:"",code:t,remainingActiveTime:0}})),this.plates=[],this.shuffleBoard()}},{key:"ungrant",value:function(t){return!!this.inventories.find((function(e){return e.code===t}))&&(this.inventories=this.inventories.map((function(e){return e.code===t&&e.amount--,e})),this.inventories=this.inventories.filter((function(t){return t.amount>0})),!0)}},{key:"grant",value:function(t,e){if(this.inventories.find((function(e){return e.code===t})))this.inventories=this.inventories.map((function(r){return r.code===t&&(e?r.amount+=e:r.amount++),r}));else{if(this.inventories.length>=this.mapData.inventorySlotAmount)return;e?this.inventories.push({code:t,amount:e}):this.inventories.push({code:t,amount:1})}}},{key:"clearPlate",value:function(t){var e=this;if(0!==this.plates[t].length){var r,n=S(this.plates[t]);try{var i=function(){var t=r.value;e.currentOrders.includes(t)?(e.currentOrders=e.currentOrders.filter((function(e){return e!==t})),0===e.currentOrders.length&&at.emit("endGame")):e.grant(t)};for(n.s();!(r=n.n()).done;)i()}catch(o){n.e(o)}finally{n.f()}this.plates[t].length=0}}},{key:"putOnPlate",value:function(t,e){if(this.ungrant(t)){this.plates[e].push(t);var r=lt.search.apply(lt,$(this.plates[e]));r&&(this.plates[e]=[r.outputItemCode])}}},{key:"process",value:function(t){var e=this;this.isPause||(this.totalTime+=t,this.tools=this.tools.map((function(r){if(r.remainingActiveTime-t<=0){r.remainingActiveTime=0;var n=ct.search(r.itemCode,r.code);n&&n.outputItemCodes.map((function(t){return e.grant(t)})),r.itemCode=""}else r.remainingActiveTime=parseFloat((r.remainingActiveTime-t).toFixed(2));return r})))}},{key:"use",value:function(t,e){var r=this.tools.find((function(e){return e.code===t}))||null;if(r&&0===r.remainingActiveTime){var n=ct.search(e,t);if(n)this.ungrant(e)&&(this.tools=this.tools.map((function(t){return t.code===r.code?g(g({},r),{},{itemCode:e,remainingActiveTime:n.requireTime}):t})))}}}]),t}(),bt=mt,wt=new(function(){function t(){u(this,t),this.levels=[],this.levels=[{id:"1",name:"Vong 1",minTime:0,receiveStarTime:600},{id:"2",name:"Vong 2",minTime:0,receiveStarTime:600},{id:"3",name:"Vong 3",minTime:0,receiveStarTime:600},{id:"4",name:"Vong 4",minTime:0,receiveStarTime:600},{id:"5",name:"Vong 5",minTime:0,receiveStarTime:600}]}return f(t,[{key:"setLevel",value:function(t,e){var r=this.levels.find((function(e){return e.id===t}));r&&((0===r.minTime||e<r.minTime)&&(r.minTime=e),this.levels=this.levels.map((function(t){return t.id===r.id?r:t})),console.log(this.levels))}}]),t}()),_t=function(){var t=e(i().mark((function t(e){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(t){return t.json()}));case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),xt=function(t){if(0===t.objects.length)return 0;var e,r=S(t.properties);try{for(r.s();!(e=r.n()).done;){var n=e.value;if("slot"===n.name)return n.value}}catch(i){r.e(i)}finally{r.f()}return 0},Et=function(t){var e=[];if(0===t.properties.length)return e;var r,n=S(t.properties);try{for(n.s();!(r=n.n()).done;){var i=r.value;if("order_list"===i.name)return i.value.trim().replaceAll(" ","").split(/[,.]/)}}catch(o){n.e(o)}finally{n.f()}return e},Tt=function(t){if(0===t.objects.length)return[];var e,r=[],n=S(t.objects);try{for(n.s();!(e=n.n()).done;){var i=e.value;r.push({pos:new T(i.x,i.y),size:new T(i.width,i.height),type:i.type})}}catch(o){n.e(o)}finally{n.f()}return r},At=600,It=1e3,Mt=new T(120,120),Rt=[{r:1,g:0,b:0,a:1},{r:0,g:1,b:0,a:1},{r:.98,g:.73,b:0,a:1},{r:0,g:0,b:1,a:1}],Lt=function(){var t=e(i().mark((function t(r,n,o){var s,u,h,f,c,l,p,d,g,v,y,m,b,w,_,x,E,A,I,R,L,O,U,C,B,D,P,N,j,k,F,V,H,W,G,X,q,z,Z,Q,$,J,tt,rt,it,st,ut,ht,ft,ct,lt,pt,yt,mt,Lt,Ot,St,Ct;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=n.getContext(),f=n.getCamera(),c=K()(h),l=new bt,p=n.getCanvas(),d=a(h),t.next=8,nt(h,"assets/book-bold.fnt");case 8:return g=t.sent,(v=g.createRenderer(At)).setAlignMode(et),y=Y(p,n),t.next=14,_t("./assets/maps/".concat(o,".json"));case 14:m=t.sent,b=!1,at.addListener("endGame",e(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b=!0,wt.setLevel(o,parseFloat(l.totalTime.toFixed(2))),l.pauseGame();case 3:case"end":return t.stop()}}),t)})))),w=vt,_=S(m.layers),t.prev=19,_.s();case 21:if((x=_.n()).done){t.next=37;break}E=x.value,t.t0=E.name,t.next="inventory"===t.t0?26:"order"===t.t0?28:"tool"===t.t0?30:"plate"===t.t0?32:34;break;case 26:return w.inventorySlotAmount=xt(E),t.abrupt("break",35);case 28:return w.orders=Et(E),t.abrupt("break",35);case 30:return w.tools=Tt(E),t.abrupt("break",35);case 32:return w.plateSlotAmount=xt(E),t.abrupt("break",35);case 34:return t.abrupt("break",35);case 35:t.next=21;break;case 37:t.next=42;break;case 39:t.prev=39,t.t1=t.catch(19),_.e(t.t1);case 42:return t.prev=42,_.f(),t.finish(42);case 45:if(l.setMapData(w),A=ot.BOARD_WIDTH/5,I=A/ot.CELL_RATIO,R=new T(25,3*ot.WORLD_HEIGHT/4-5*I/2),L=function(t,e){return new T(R.x+t*A,R.y+e*I)},O=function(t,e){if(t<0||e<0)return null;if(t>ot.BOARD_WIDTH||e>ot.BOARD_HEIGHT)return null;var r=new T(0,0);r.x=Math.floor(t/A),r.y=Math.floor(e/I);var n=L(r.x,r.y).sub(R.x,R.y).add(A/2,I/2);return Math.max(Math.abs(t-n.x),Math.abs(e-n.y))>.5*I?null:r},U=[],C=function(t,e){for(var r=0;r<U.length;r++){var n=U[r];if(n.x===t&&n.y===e)return r}return-1},B=!1,D=-1,P=[],N=function(t){l.processPath(t).then(e(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))))},j=function(t){if(y.isTouched()){B=!0;var e=y.getTouchedWorldCoord(),r=O(e.x-R.x,e.y-R.y);if(null!==r){var n=l.getCell(r.x,r.y);if(void 0===n)return;if(-1!==D&&n.color!==D)return;var i=C(r.x,r.y),o=!1;if(-1===i){var a=U[U.length-1];(!a||Math.max(Math.abs(r.x-a.x),Math.abs(r.y-a.y))<=1)&&(U.push(r),o=!0),1===U.length&&(D=n.color)}else i===U.length-2&&(U.pop(),o=!0);if(o){P.length=0;for(var s=0;s<U.length;s++)P.push(U[s])}}}else B&&!l.isProcessing&&(N(U),U.length=0,B=!1,D=-1,P.length=0)},k=function(t,e){return P.length>0&&void 0!==P.find((function(r){return r.x===t&&r.y===e}))},F=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=new T(R.x+t*A,R.y+e*I),o=.5*A,a=o,s=!1;P.length>0&&(s=k(t,e)),d.setColor(Rt[r.color].r,Rt[r.color].g,Rt[r.color].b,Rt[r.color].a),d.draw(c,i.x+A/2-o/2,i.y+I/2-a/2,o,a,o/2,a/2,0,n*(s?1.1:1),n*(s?1.1:1)),d.setColor(1,1,1,1)},V=function(t,e){return L(t,e).add(A/2,I/2)},H=function(t){for(var e=0;e<t.length&&t[e+1];e++){var r=t[e],n=t[e+1],i=V(r.x,r.y),o=i.x,a=i.y,s=V(n.x,n.y),u=s.x,h=s.y;u>o?(a-=.25,h-=.25):o>u&&(a-=.75,h-=.75),h>a?(o-=.25,u-=.25):a>h&&(o+=.25,u+=.25),M(d,c,o,a,u,h,10)}},W=[],gt.length>0)for(G=0;G<gt.length;G++)W.push({x:30+60*G,y:ot.WORLD_HEIGHT/2-20});if(X=[],dt.length>0)for(q=0;q<dt.length;q++)X.push({x:350+60*q,y:ot.WORLD_HEIGHT/2-20});if(z=null,Z=new T(0,0),Q=[],$=60,(null===(s=l.mapData)||void 0===s?void 0:s.inventorySlotAmount)>0)for($=(ot.WORLD_WIDTH-100-30*(l.mapData.inventorySlotAmount-1))/l.mapData.inventorySlotAmount,J=0;J<l.mapData.inventorySlotAmount;J++)Q.push({x:50+($+30)*J,y:120,index:J});if(tt=[],rt=60,l.currentOrders.length>0)for(rt=(ot.WORLD_WIDTH-100-30*(l.currentOrders.length-1))/l.currentOrders.length,it=0;it<l.currentOrders.length;it++)tt.push({x:50+(rt+30)*it,y:40});for(st=[],ut=0;ut<l.mapData.tools.length;ut++)st.push({x:l.mapData.tools[ut].pos.x,y:l.mapData.tools[ut].pos.y,index:ut,size:l.mapData.tools[ut].size});if(ht=[],ft=80,(null===(u=l.mapData)||void 0===u?void 0:u.plateSlotAmount)>0)for(ft=(ot.WORLD_WIDTH-100-30*((null===(ct=l.mapData)||void 0===ct?void 0:ct.plateSlotAmount)-1))/(null===(lt=l.mapData)||void 0===lt?void 0:lt.plateSlotAmount),pt=0;pt<(null===(yt=l.mapData)||void 0===yt?void 0:yt.plateSlotAmount);pt++)ht.push({x:50+(ft+30)*pt,y:400,index:pt});return mt=function(t,e,r,n,i){return t.x>e&&t.x<e+n&&t.y>r&&t.y<r+i},Lt=function(t,e){var r,n=S(Q);try{for(n.s();!(r=n.n()).done;){var i,o=r.value;if(mt({x:t,y:e},o.x,o.y,80,80))return(null===(i=l.inventories[o.index])||void 0===i?void 0:i.code)||null}}catch(a){n.e(a)}finally{n.f()}return null},Ot=function(t,e){var r,n,i=-1,o=S(st);try{for(o.s();!(n=o.n()).done;){var a=n.value;mt({x:t,y:e},a.x,a.y,Mt.x,Mt.y)&&(i=a.index)}}catch(s){o.e(s)}finally{o.f()}return(null===(r=l.tools[i])||void 0===r?void 0:r.code)||null},St=function(t,e){var r,n=S(ht);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(mt({x:t,y:e},i.x,i.y,120,120))return i.index}}catch(o){n.e(o)}finally{n.f()}return null},y.addEventListener("touchStart",(function(){if(!b){var t=y.getTouchedWorldCoord();Z.setVector(y.getTouchedWorldCoord()),z=Lt(t.x,t.y)}})),y.addEventListener("touchMove",(function(){b||null!==z&&Z.setVector(y.getTouchedWorldCoord())})),Ct=function(t,e){for(var r=0;r<X.length;r++)if(mt({x:t,y:e},X[r].x,X[r].y,40,40))return r;return null},y.addEventListener("touchEnd",e(i().mark((function t(){var e,o,a,s,u,h,f,c,p,d;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!b){t.next=8;break}if(!mt(y.getTouchedWorldCoord(),50,50,100,50)){t.next=7;break}return t.t0=r,t.next=5,Ut(r,n);case 5:t.t1=t.sent,t.t0.setScreen.call(t.t0,t.t1);case 7:return t.abrupt("return");case 8:null!==z?(e=y.getTouchedWorldCoord(),o=e.x,a=e.y,(s=Ot(o,a))?l.use(s,z):null!=(u=St(o,a))?l.putOnPlate(z,u):z=null,z=null):(h=y.getTouchedWorldCoord(),f=h.x,c=h.y,null!=(p=St(f,c))&&l.clearPlate(p),null!=(d=Ct(f,c))&&(console.log(d),l.buy(dt[d])));case 9:case"end":return t.stop()}}),t)})))),t.abrupt("return",{dispose:function(){y.cleanup(),at.removeListener("endGame",(function(){}))},update:function(t){l.process(t),d.setProjection(f.combined),d.begin(),d.setColor(.26,.53,.96,1),d.draw(c,0,0,At,500),d.setColor(.3,.3,.3,1),d.draw(c,0,500,At,500),d.setColor(1,1,1,1),d.setColor(.3,.3,.3,1),v.draw(d,"Orders",0,5,20);for(var e=0;e<l.currentOrders.length;e++)d.draw(c,tt[e].x,tt[e].y,rt,50),v.draw(d,l.currentOrders[e],tt[e].x-ot.WORLD_WIDTH/2+rt/2,tt[e].y,15);d.setColor(.3,.3,.3,1);for(var r=0;r<Q.length;r++)d.draw(c,Q[r].x,Q[r].y,$,50);d.setColor(0,0,0,1);for(var n=0;n<l.inventories.length;n++)v.draw(d,l.inventories[n].code,Q[n].x-ot.WORLD_WIDTH/2+$/2,Q[n].y,15),v.draw(d,"x".concat(l.inventories[n].amount),Q[n].x-ot.WORLD_WIDTH/2+$/2,Q[n].y+30,15);d.setColor(.3,.3,.3,1);for(var i=0;i<ht.length;i++)d.draw(c,ht[i].x,ht[i].y,ft,50);for(var o=0;o<l.plates.length;o++)for(var a=0;a<l.plates[o].length;a++)v.draw(d,l.plates[o][a],ht[o].x-ot.WORLD_WIDTH/2+ft/2,ht[o].y+15*a,15);d.setColor(.2,.2,.2,1);for(var s=0;s<l.mapData.tools.length;s++)d.draw(c,st[s].x,st[s].y,st[s].size.x,st[s].size.y),v.draw(d,l.tools[s].code,st[s].x-ot.WORLD_WIDTH/2+st[s].size.x/2,st[s].y-50,30),v.draw(d,l.tools[s].itemCode.toString(),st[s].x-ot.WORLD_WIDTH/2+ +st[s].size.x/2,st[s].y+st[s].size.y/3,30),v.draw(d,l.tools[s].remainingActiveTime.toString(),st[s].x-ot.WORLD_WIDTH/2+ +st[s].size.x/2,st[s].y+st[s].size.y,30);z&&v.draw(d,z,Z.x-300,Z.y),j(),H(U);for(var u=0;u<5;u++)for(var h=0;h<5;h++){d.setColor(1,1,1,1);var p=l.getCell(u,h);p.color>=0&&F(u,h,p)}b?(d.setColor(0,0,0,.5),d.draw(c,0,0,At,It),d.setColor(.3,.3,.3,1),d.draw(c,50,50,100,50),v.draw(d,"Back",-ot.WORLD_WIDTH/2+100,50,30),v.draw(d,"Victory",0,ot.WORLD_HEIGHT/4,80),v.draw(d,"Total Time: ".concat(l.totalTime.toFixed(2).toString()),0,ot.WORLD_HEIGHT/4+100,30)):(d.setColor(0,0,0,1),d.draw(c,ot.WORLD_WIDTH/2-40,ot.WORLD_HEIGHT/2-20,80,40),v.draw(d,l.totalTime.toFixed(2).toString(),0,ot.WORLD_HEIGHT/2-20));for(var g=0;g<X.length;g++)d.setColor(0,0,0,1),d.draw(c,X[g].x,X[g].y,40,40),v.draw(d,dt[g],X[g].x-300+20,X[g].y,20);for(var y=0;y<gt.length;y++)d.setColor(Rt[y].r,Rt[y].g,Rt[y].b,1),d.draw(c,W[y].x,W[y].y,40,40),v.draw(d,l.currencies[y].amount.toString(),W[y].x-300+20,W[y].y,20);d.end()},init:function(){}});case 88:case"end":return t.stop()}}),t,null,[[19,39,42,45]])})));return function(e,r,n){return t.apply(this,arguments)}}(),Ot=Lt,St=function(){var t=e(i().mark((function t(r,n){var o,s,u,h,f,c,l,p,d,g;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.getContext(),s=n.getCamera(),u=K()(o),t.next=5,nt(o,"assets/book-bold.fnt");case 5:for(h=t.sent,(f=h.createRenderer(ot.WORLD_WIDTH)).setAlignMode(et),c=Y(n.getCanvas(),n),l=a(o),p=[],d=wt.levels,g=0;g<d.length;g++)p.push({x:g>0?100+g%3*150:100,y:250+140*Math.floor(g/3)});return c.addEventListener("touchEnd",e(i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<d.length)){t.next=11;break}if(!it(c.getTouchedWorldCoord(),p[e].x,p[e].y,120,120)){t.next=8;break}return t.t0=r,t.next=6,Ot(r,n,d[e].id);case 6:t.t1=t.sent,t.t0.setScreen.call(t.t0,t.t1);case 8:e++,t.next=1;break;case 11:case"end":return t.stop()}}),t)})))),t.abrupt("return",{update:function(t){l.setProjection(s.combined),l.begin(),l.setColor(.26,.53,.96,1),l.draw(u,0,0,ot.WORLD_WIDTH,ot.WORLD_HEIGHT),f.draw(l,"Level",0,ot.WORLD_HEIGHT/10,80),l.setColor(.3,.3,.3,1);for(var e=0;e<d.length;e++)l.draw(u,p[e].x,p[e].y,120,120),f.draw(l,d[e].name,(e>0?100+e%3*150:100)-ot.WORLD_WIDTH/2+50,250+140*Math.floor(e/3),20),f.draw(l,"Time: ".concat(d[e].minTime,"s"),(e>0?100+e%3*150:100)-ot.WORLD_WIDTH/2+50,280+140*Math.floor(e/3),20);l.end()},dispose:function(){c.cleanup()},init:function(){}});case 15:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),Ut=St,Ct=function(){var t=e(i().mark((function t(r,n){var o,s,u,h,f,c,l;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.getContext(),s=n.getCamera(),u=K()(o),h=a(o),t.next=6,nt(o,"assets/book-bold.fnt");case 6:return f=t.sent,(c=f.createRenderer(ot.WORLD_WIDTH)).setAlignMode(et),l=Y(n.getCanvas(),n),t.abrupt("return",{update:function(t){h.setProjection(s.combined),h.begin(),h.setColor(.26,.53,.96,1),h.draw(u,0,0,ot.WORLD_WIDTH,ot.WORLD_HEIGHT),c.draw(h,"Cooking",0,ot.WORLD_HEIGHT/4,80),h.setColor(.3,.3,.3,1),h.draw(u,ot.WORLD_WIDTH/2-100,ot.WORLD_HEIGHT/4+200,200,100),c.draw(h,"Start",0,ot.WORLD_HEIGHT/4+210,50),h.end()},dispose:function(){l.cleanup()},init:function(){l.addEventListener("touchEnd",e(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!it(l.getTouchedWorldCoord(),ot.WORLD_WIDTH/2-100,ot.WORLD_HEIGHT/4+200,200,100)){t.next=6;break}return t.t0=r,t.next=4,Ut(r,n);case 4:t.t1=t.sent,t.t0.setScreen.call(t.t0,t.t1);case 6:case"end":return t.stop()}}),t)}))))}});case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),Bt=Ct,Dt=function(){var t=e(i().mark((function t(){var e,r,n,o,u,h,f;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Q(),r=e.getCanvas(),n=X(r,600,1e3),o=n.getContext(),u=n.getCamera(),h=a(o),f=new q,t.t0=f,t.next=10,Bt(f,n);case 10:t.t1=t.sent,t.t0.setScreen.call(t.t0,t.t1),s((function(t){f.update(t),h.setProjection(u.combined),h.begin(),h.end()}));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Dt()}()}();